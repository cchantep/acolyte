<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia at 2014-01-12 
 | Rendered using Apache Maven Fluido Skin 1.3.1
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20140112" />
    <meta http-equiv="Content-Language" content="en" />
    <title>acolyte - Frequently Asked Questions</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.3.1.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />

      
    <script type="text/javascript" src="./js/apache-maven-fluido-1.3.1.min.js"></script>

                          
        
<link rel="stylesheet" type="text/css" href="css/pygments.min.css"/>
          
                  </head>
        <body class="topBarDisabled">
          
    
    
            
    
        
    <a href="http://github.com/cchantep/acolyte">
      <img style="position: absolute; top: 0; right: 0; border: 0; z-index: 10000;"
        src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png"
        alt="Fork me on GitHub">
    </a>
  
                
                    
    
        <div class="container-fluid">
          <div id="banner">
        <div class="pull-left">
                                <div id="bannerLeft">
                <h2>Acolyte</h2>
                </div>
                      </div>
        <div class="pull-right">  </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
                
                    
                  <li id="publishDate">Last Published: 2014-01-12
                      <span class="divider">|</span>
                   </li>
                  <li id="projectVersion">Version: 1.0.12
                      </li>
                      
                
                    
      
                            </ul>
      </div>

            
      <div class="row-fluid">
        <div id="leftColumn" class="span3">
          <div class="well sidebar-nav">
                
                    
                <ul class="nav nav-list">
                    <li class="nav-header">User guide</li>
                              
      <li>
  
                          <a href="./index.html#Java" title="Java">
          <i class="none"></i>
        Java</a>
            </li>
                
      <li>
  
                          <a href="./index.html#Scala" title="Scala">
          <i class="none"></i>
        Scala</a>
            </li>
                
      <li>
  
                          <a href="./index.html#Play_Framework" title="Play Framework">
          <i class="none"></i>
        Play Framework</a>
            </li>
                
      <li>
  
                          <a href="./faq.html" title="FAQ">
          <i class="none"></i>
        FAQ</a>
            </li>
                              <li class="nav-header">Subprojects</li>
                              
      <li>
  
                          <a href="./studio.html" title="Acolyte Studio">
          <i class="none"></i>
        Acolyte Studio</a>
            </li>
                              <li class="nav-header">Reference</li>
                              
      <li>
  
                          <a href="./apidocs/index.html" title="Javadoc">
          <i class="none"></i>
        Javadoc</a>
            </li>
                
      <li>
  
                          <a href="./scaladocs/index.html" title="Scaladoc">
          <i class="none"></i>
        Scaladoc</a>
            </li>
                
      <li>
  
                          <a href="./changelog.html" title="Changelog">
          <i class="none"></i>
        Changelog</a>
            </li>
                              <li class="nav-header">Project Documentation</li>
                                                                                                                    
      <li>
  
                          <a href="project-info.html" title="Project Information">
          <i class="icon-chevron-right"></i>
        Project Information</a>
                  </li>
            </ul>
                
                    
                
          <hr />

           <div id="poweredBy">
                            <div class="clear"></div>
                            <div class="clear"></div>
               
        
        
        <div id="twitter">
    
    <a href="https://twitter.com/cchantep" class="twitter-follow-button" data-show-count="true" data-align="left" data-size="medium" data-show-screen-name="true" data-lang="en">Follow cchantep</a>
    <script type="text/javascript">!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>

        </div>
                   <div class="clear"></div>
                            <div class="clear"></div>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" />
      </a>
                  </div>
          </div>
        </div>
        
                
        <div id="bodyColumn"  class="span9" >
                                  
            <h1>Frequently Asked Questions</h1>
<div class="section">
<h2>Why I need to specify a query detection pattern?<a name="Why_I_need_to_specify_a_query_detection_pattern"></a></h2>
<p>A database engine manages 2 kinds of statement, query statement that fetchs rows or updates statement that update persistent data.</p>
<p>To simulate this behaviour, to allow you return rows when you consider statement to be a query, or update state/count when it should be an update, Acolyte should be taught how to detect these cases.</p>
<p>Using composite handler, you can specify it using detection pattern(s) (regular expressions):</p>

<div>
<pre>
<span class="kn">import</span> <span class="nn">acolyte.CompositeHandler</span><span class="o">;</span>

<span class="n">CompositeHandler</span> <span class="n">handler</span> <span class="o">=</span> <span class="n">CompositeHandler</span><span class="o">.</span><span class="na">empty</span><span class="o">(</span><span class="o">)</span><span class="o">.</span>
  <span class="c1">// Considers as query if starts with 'SELECT ' or contains 'EXEC fetch_data'</span>
<span class="c1"></span>  <span class="n">withQueryDetection</span><span class="o">(</span><span class="s">&quot;^SELECT &quot;</span><span class="o">,</span> <span class="s">&quot;EXEC fetch_data&quot;</span><span class="o">)</span><span class="o">.</span> 
  <span class="c1">// Variant with pre-compiled pattern</span>
<span class="c1"></span>  <span class="n">withQueryDetection</span><span class="o">(</span><span class="n">Pattern</span><span class="o">.</span><span class="na">compile</span><span class="o">(</span><span class="s">&quot;ORDER BY test$&quot;</span><span class="o">)</span><span class="o">)</span><span class="o">;</span>
</pre></div>
<p>In previous example, handler is given different patterns. In such case, order in which patterns were given is used to check executed statement, until it matches at least one of them, or they are all checked.</p>
<p>Equivalent with the Scala DSL is:</p>

<div>
<pre>import acolyte.Acolyte.handleStatement

val handler = handleStatement.
  withQueryDetection(&quot;^SELECT &quot;, &quot;EXEC fetch_data&quot;). 
  withQueryDetection(Pattern.compile(&quot;ORDER BY test$&quot;))
</pre></div>
<p>With Scala DSL, if you want all statements to be considered as queries, you can use:</p>

<div>
<pre>import acolyte.QueryExecution
import acolyte.Acolyte.handleQuery

val handler = handleQuery { e: QueryExecution =&gt;
  // handleQueries
  queryResults
}
</pre></div></div>
<div class="section">
<h2>What&#x2019;s the maximum number of column for a row?<a name="Whats_the_maximum_number_of_column_for_a_row"></a></h2>
<p>Implementations of <a class="externalLink" href="http://cchantep.github.io/acolyte/apidocs/acolyte/Row.html">Row</a> and <a class="externalLink" href="http://cchantep.github.io/acolyte/apidocs/acolyte/RowList.html">RowList</a> are provided up to 52 columns.</p>
<p>As Scala tuples are limited to 22, syntax <tt>rowList :+ tuple</tt> is not available above this limit.</p></div>
<div class="section">
<h2>How to simply return a single scalar row?<a name="How_to_simply_return_a_single_scalar_row"></a></h2>
<p>If you just need to mockup a result containing only 1 row with 1 column, single column factories (<tt>booleanList</tt>, <tt>byteList</tt>, <tt>intList</tt>, <tt>stringList</tt>, &#x2026;) can be called, or in Scala single value can be directly used (e.g. <tt>2</tt> for a single row with only one int column).</p></div>
<div class="section">
<h2>Why do I get an error like &#x201c;overloaded method value rowListX with alternatives&#x201d; from Scala compiler?<a name="Why_do_I_get_an_error_like_overloaded_method_value_rowListX_with_alternatives_from_Scala_compiler"></a></h2>
<p>Example: <tt>
overloaded method value rowList6 with alternatives:
[error]   [A, B, C, D, E, F](x$1: acolyte.RowList.Column[A], x$2: acolyte.RowList.Column[B], x$3: acolyte.RowList.Column[C], x$4: acolyte.RowList.Column[D], x$5: acolyte.RowList.Column[E], x$6: acolyte.RowList.Column[F])acolyte.RowList6[A,B,C,D,E,F] &lt;and&gt;
[error]   [A, B, C, D, E, F](x$1: Class[A], x$2: Class[B], x$3: Class[C], x$4: Class[D], x$5: Class[E], x$6: Class[F])acolyte.RowList6[A,B,C,D,E,F]
[error]  cannot be applied to ((Class[String], String), (Class[String], String), (Class[String], String), (Class[String], String), (Class[String], String), (Class[String], String))
</tt></p>
<p>It occurs when <tt>acolyte.Implicits.PairAsColumn</tt> is missing while using pimped Scala syntax to declare row list:</p>

<div>
<pre>import acolyte.RowLists.rowList6

// Corresponding to error example
// - will raise compilation error
rowList6(
  classOf[String] -&gt; &quot;col1&quot;, 
  classOf[String] -&gt; &quot;col2&quot;,
  classOf[String] -&gt; &quot;col3&quot;,
  classOf[String] -&gt; &quot;col4&quot;,
  classOf[String] -&gt; &quot;col5&quot;,
  classOf[String] -&gt; &quot;col6&quot;)
</pre></div>
<p>Proper import simply fixes that:</p>

<div>
<pre>import acolyte.RowLists.rowList6
import acolyte.Implicits.PairAsColumn // or acolyte.Implicits._

rowList6( // Now it's ok
  classOf[String] -&gt; &quot;col1&quot;, 
  classOf[String] -&gt; &quot;col2&quot;,
  classOf[String] -&gt; &quot;col3&quot;,
  classOf[String] -&gt; &quot;col4&quot;,
  classOf[String] -&gt; &quot;col5&quot;,
  classOf[String] -&gt; &quot;col6&quot;)
</pre></div></div>
<div class="section">
<h2>Why do I get error with null value in row?<a name="Why_do_I_get_error_with_null_value_in_row"></a></h2>
<p>As type can always be inferred when using <tt>null</tt>, it can lead to ambiguity. e.g. error with the scala DSL:</p>

<div>
<pre>[error]  found   : Null(null)
[error]  required: Int
</pre></div>
<p>In such cases, <a href="index.html#NULL_values">type of null</a> must be explicitly given.</p></div>
<div class="section">
<h2>Can I re-use data from existing DB with Acolyte?<a name="Can_I_re-use_data_from_existing_DB_with_Acolyte"></a></h2>
<p><a href="./studio.html">Studio</a> can record results from DB, so they can be used later with Acolyte framework, either in Java or Scala.</p></div>
                  </div>
            </div>
          </div>

    <hr/>

    <footer>
            <div class="container-fluid">
                      <div class="row-fluid">
                              <p >Copyright &copy;                   2014.
          All rights reserved.      
                    
      </p>
        </div>

        
        
                </div>
    </footer>
        </body>
</html>
