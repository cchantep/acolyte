<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia at 2013-12-10
 | Rendered using Apache Maven Fluido Skin 1.3.0
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20131210" />
    <meta http-equiv="Content-Language" content="en" />
    <title>acolyte - Frequently Asked Questions</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.3.0.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />

      
    <script type="text/javascript" src="./js/apache-maven-fluido-1.3.0.min.js"></script>

    
            </head>
        <body class="topBarDisabled">
          
        
    
        <div class="container-fluid">
          <div id="banner">
        <div class="pull-left">
                                <div id="bannerLeft">
                <h2>Acolyte</h2>
                </div>
                      </div>
        <div class="pull-right">  </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
                
                    
                  <li id="publishDate">Last Published: 2013-12-10</li>
                  <li class="divider">|</li> <li id="projectVersion">Version: 1.0.11</li>
                      
                
                    
      
                                              
    <li class="pull-right">              <a href="http://github.com/cchantep/acolyte" class="externalLink" title="GitHub project">
        GitHub project</a>
  </li>

                        </ul>
      </div>

            
      <div class="row-fluid">
        <div id="leftColumn" class="span3">
          <div class="well sidebar-nav">
                
                    
                <ul class="nav nav-list">
                    <li class="nav-header">User guide</li>
                                
      <li>
    
                          <a href="./index.html#Java" title="Java">
          <i class="none"></i>
        Java</a>
            </li>
                  
      <li>
    
                          <a href="./index.html#Scala" title="Scala">
          <i class="none"></i>
        Scala</a>
            </li>
                  
      <li>
    
                          <a href="./index.html#Playframework" title="Playframework">
          <i class="none"></i>
        Playframework</a>
            </li>
                  
      <li>
    
                          <a href="./faq.html" title="FAQ">
          <i class="none"></i>
        FAQ</a>
            </li>
                              <li class="nav-header">Reference</li>
                                
      <li>
    
                          <a href="./apidocs/index.html" title="Javadoc">
          <i class="none"></i>
        Javadoc</a>
            </li>
                  
      <li>
    
                          <a href="./scaladocs/index.html" title="Scaladoc">
          <i class="none"></i>
        Scaladoc</a>
            </li>
                              <li class="nav-header">Project Documentation</li>
                                                                                                                      
      <li>
    
                          <a href="project-info.html" title="Project Information">
          <i class="icon-chevron-right"></i>
        Project Information</a>
                  </li>
            </ul>
                
                    
                
          <hr class="divider" />

           <div id="poweredBy">
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" />
      </a>
                  </div>
          </div>
        </div>
        
                
        <div id="bodyColumn"  class="span9" >
                                  
            <h1>Frequently Asked Questions</h1>
<div class="section">
<h2>Why I need to specify a query detection pattern?<a name="Why_I_need_to_specify_a_query_detection_pattern"></a></h2>
<p>A database engine manages 2 kinds of statement, query statement that fetchs rows or updates statement that update persistent data.</p>
<p>To simulate this behaviour, to allow you return rows when you consider statement to be a query, or update state/count when it should be an update, Acolyte should be taught how to detect these cases.</p>
<p>Using composite handler, you can specify it using detection pattern(s) (regular expressions):</p>

<div>
<pre>
<span class="kn">import</span> <span class="nn">acolyte.CompositeHandler</span><span class="o">;</span>

<span class="n">CompositeHandler</span> <span class="n">handler</span> <span class="o">=</span> <span class="n">CompositeHandler</span><span class="o">.</span><span class="na">empty</span><span class="o">(</span><span class="o">)</span><span class="o">.</span>
  <span class="c1">// Considers as query if starts with 'SELECT ' or contains 'EXEC fetch_data'</span>
<span class="c1"></span>  <span class="n">withQueryDetection</span><span class="o">(</span><span class="s">&quot;^SELECT &quot;</span><span class="o">,</span> <span class="s">&quot;EXEC fetch_data&quot;</span><span class="o">)</span><span class="o">.</span> 
  <span class="c1">// Variant with pre-compiled pattern</span>
<span class="c1"></span>  <span class="n">withQueryDetection</span><span class="o">(</span><span class="n">Pattern</span><span class="o">.</span><span class="na">compile</span><span class="o">(</span><span class="s">&quot;ORDER BY test$&quot;</span><span class="o">)</span><span class="o">)</span><span class="o">;</span>
</pre></div>
<p>In previous example, handler is given different patterns. In such case, order in which patterns were given is used to check executed statement, until it matches at least one of them, or they are all checked.</p>
<p>Equivalent with the Scala DSL is:</p>

<div>
<pre>import acolyte.Acolyte.handleStatement

val handler = handleStatement.
  withQueryDetection(&quot;^SELECT &quot;, &quot;EXEC fetch_data&quot;). 
  withQueryDetection(Pattern.compile(&quot;ORDER BY test$&quot;))
</pre></div>
<p>With Scala DSL, if you want all statements to be considered as queries, you can use:</p>

<div>
<pre>import acolyte.QueryExecution
import acolyte.Acolyte.handleQuery

val handler = handleQuery { e: QueryExecution =&gt;
  // handleQueries
  queryResults
}
</pre></div></div>
<div class="section">
<h2>What&#x2019;s the maximum number of column for a row?<a name="Whats_the_maximum_number_of_column_for_a_row"></a></h2>
<p>Implementations of <a class="externalLink" href="http://cchantep.github.io/acolyte/apidocs/acolyte/Row.html">Row</a> and <a class="externalLink" href="http://cchantep.github.io/acolyte/apidocs/acolyte/RowList.html">RowList</a> are provided up to 26 columns.</p></div>
                  </div>
            </div>
          </div>

    <hr/>

    <footer>
            <div class="container-fluid">
              <div class="row span12">Copyright &copy;                   2013.
          All Rights Reserved.      
                    
      </div>

        
        
                </div>
    </footer>
  </body>
</html>
