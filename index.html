
<!DOCTYPE html>
<!--
 Generated by Apache Maven Doxia at 2014-08-04
 Rendered using Reflow Maven Skin 1.1.1 (http://andriusvelykis.github.io/reflow-maven-skin)
-->
<html  xml:lang="en" lang="en">

	<head>
		<meta charset="UTF-8" />
		<title>acolyte - Acolyte</title>
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<meta name="description" content="" />
		<meta http-equiv="content-language" content="en" />

		<link href="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/css/bootstrap.min.css" rel="stylesheet" />
		<link href="./css/docs.css" rel="stylesheet" />
		<link href="./css/reflow-skin.css" rel="stylesheet" />


		<link href="./css/lightbox.css" rel="stylesheet" />

		<link href="./css/site.css" rel="stylesheet" />
		<link href="./css/print.css" rel="stylesheet" media="print" />

		<!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
		<!--[if lt IE 9]>
			<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
		<![endif]-->


		
<link rel="stylesheet" type="text/css" href="css/pygments.min.css"/>
<link rel="stylesheet" type="text/css" href="css/responsive.css"/>
	</head>

	<body class="page-index project-acolyte" data-spy="scroll" data-offset="60" data-target="#toc-scroll-target">

		<div class="navbar navbar-fixed-top">
			<div class="navbar-inner">
				<div class="container">
					<a class="btn btn-navbar" data-toggle="collapse" data-target="#top-nav-collapse">
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
					</a>
					<div class="nav-collapse collapse" id="top-nav-collapse">
						<ul class="nav pull-right">
							<li class="dropdown">
								<a href="#" class="dropdown-toggle" data-toggle="dropdown">User guide <b class="caret"></b></a>
								<ul class="dropdown-menu">
									<li ><a href="java.html" title="Java">Java</a></li>
									<li ><a href="scala.html" title="Scala">Scala</a></li>
									<li ><a href="faq.html" title="FAQ">FAQ</a></li>
								</ul>
							</li>
							<li class="dropdown">
								<a href="#" class="dropdown-toggle" data-toggle="dropdown">Integration <b class="caret"></b></a>
								<ul class="dropdown-menu">
									<li ><a href="integration.html" title="Guide">Guide</a></li>
									<li ><a href="integration.html#Play_Framework" title="Play Framework">Play Framework</a></li>
								</ul>
							</li>
							<li class="dropdown">
								<a href="#" class="dropdown-toggle" data-toggle="dropdown">Subprojects <b class="caret"></b></a>
								<ul class="dropdown-menu">
									<li ><a href="studio.html" title="Acolyte Studio">Acolyte Studio</a></li>
									<li ><a href="scalac-plugin.html" title="Scalac plugin">Scalac plugin</a></li>
								</ul>
							</li>
							<li class="dropdown">
								<a href="#" class="dropdown-toggle" data-toggle="dropdown">Reference <b class="caret"></b></a>
								<ul class="dropdown-menu">
									<li ><a href="apidocs/index.html" title="Javadoc">Javadoc</a></li>
									<li ><a href="scaladocs/index.html" title="Scaladoc">Scaladoc</a></li>
									<li ><a href="build.html" title="Build">Build</a></li>
									<li ><a href="changelog.html" title="Changelog">Changelog</a></li>
								</ul>
							</li>
							<li class="dropdown">
								<a href="#" class="dropdown-toggle" data-toggle="dropdown">Tutorial & Demo <b class="caret"></b></a>
								<ul class="dropdown-menu">
									<li ><a href="http://tour.acolyte.eu.org" title="Interactive tour" class="externalLink">Interactive tour</a></li>
									<li ><a href="https://github.com/cchantep/acolyte/tree/10m-anorm-tutorial#acolyteanorm-10-minutes-tutorial" title="10m with Anorm" class="externalLink">10m with Anorm</a></li>
								</ul>
							</li>
							<li class="dropdown">
								<a href="#" class="dropdown-toggle" data-toggle="dropdown">Support <b class="caret"></b></a>
								<ul class="dropdown-menu">
									<li ><a href="https://groups.google.com/forum/#!forum/acolyte-support" title="Mailing list" class="externalLink">Mailing list</a></li>
								</ul>
							</li>
							<li class="dropdown">
								<a href="#" class="dropdown-toggle" data-toggle="dropdown">Project Documentation <b class="caret"></b></a>
								<ul class="dropdown-menu">
									<li class="dropdown-submenu ">
										<a href="project-info.html" title="Project Information">Project Information</a>
										<ul class="dropdown-menu">
											<li ><a href="source-repository.html" title="Source Repository">Source Repository</a></li>
											<li ><a href="integration.html" title="Continuous Integration">Continuous Integration</a></li>
											<li ><a href="issue-tracking.html" title="Issue Tracking">Issue Tracking</a></li>
										</ul>
									</li>
								</ul>
							</li>
						</ul>
					</div><!--/.nav-collapse -->
				</div>
			</div>
		</div>

	<div class="container">

	<!-- Masthead
	================================================== -->

	<header>
		<div>
			<ul class="breadcrumb">
				<li class="projectVersion version-date">Version: 1.0.23</li>
				<li class="divider">|</li>
				<li class="publishDate version-date">Last Published: 2014-08-04</li>
			</ul>
		</div>
	</header>

	<div class="main-body">
	<div class="row">
		<div class="span12">
			<div class="body-content">
<div class="page-header">
 <h1>Acolyte</h1>
</div> 
<p>Acolyte is a JDBC driver designed for cases like mockup, testing, or any case you would like to be able to handle JDBC query by hand (or maybe that’s only Chmeee’s son on the Ringworld).</p> 
<div class="section"> 
 <h2 id="Motivation">Motivation</h2> 
 <p>Automated testing for persistence (JDBC related) code is not trivial. Using test DB requires tools (scripts) to set up environment repeatly, for each time tests are executed.</p> 
 <p>Considering integration testing that’s fine. It’s different for unit testing.</p> 
 <p>Unit tests must be isolated from each others so each unit can be validated independently. </p> 
 <p>A unit test can alter database as executed. Thus tests coming after would have to cope with this altered environment, without asserting which one is runned first (no order assumption).</p> 
 <p>As tests can be runned in parallel while considering code accessing same data spaces. Without extra attention to isolation/transaction management, this can lead to tests conflicting between them.</p> 
 <p>With Acolyte, connection behaviour can be built, defining which statement is supported with which (query or update) result.</p> 
 <p>Each prepared connection can supports only queries and updates your code is interested in, and there is no need to simulate a whole data store structure/schema.</p> 
 <p>As soon as Acolyte connections don’t rely on data store, statement executions are isolated without extra effort.</p> 
 <p>As a JDBC driver is provided you can simply update test configuration, so that Acolyte connections are resolved by persistence code without change throught standard mechanisms (JDBC URL, JNDI, …).</p> 
 <p>It also makes simple testing of DB edge cases (e.g. unrecoverable/unexpected error). It’s easy to throw an exception from Acolyte connection, so that it can be validated persistence code is properly handling such case.</p> 
 <p>You can also use Acolyte to fully benefit from data access abstraction, not only not having to wait persistence (DB) being setup to code accesses, but also not having to wait persistence to code tests for access code.</p> 
 <p>You can get a quick interactive tour of Acolyte, online at <a class="externalLink" href="http://tour.acolyte.eu.org">tour.acolyte.eu.org</a>.</p> 
</div> 
<div class="section"> 
 <h2 id="Usage">Usage</h2> 
 <p>Acolyte is usable with any code relying on JDBC. It makes it available for any JVM language:</p> 
 <ul> 
  <li>vanilla <a href="./java.html">Java</a>,</li> 
  <li><a href="./scala.html">Scala</a> (with DSL),</li> 
  <li><a class="externalLink" href="http://clojure.com">Clojure</a>, <a class="externalLink" href="https://github.com/Frege/frege">Frege</a>, …</li> 
 </ul> 
 <p>You can get connection defined by Acolyte using the well-known <tt>java.sql.DriverManager.getConnection(jdbcUrl)</tt> (see <a href="./java.html#Connection">connection management</a>).</p> 
 <div> 
  <pre>
<span class="kd">final</span> <span class="n">String</span> <span class="n">jdbcUrl</span> <span class="o">=</span> <span class="s">&quot;jdbc:acolyte:anything-you-want?handler=my-unique-id&quot;</span><span class="o">;</span>

<span class="n">StatementHandler</span> <span class="n">handler</span> <span class="o">=</span><span class="nf"> new </span><span class="nf">CompositeHandler</span><span class="o">(</span><span class="o">)</span><span class="o">.</span>
  <span class="n">withQueryDetection</span><span class="o">(</span><span class="s">&quot;^SELECT &quot;</span><span class="o">)</span><span class="o">.</span> <span class="c1">// regex test from beginning</span>
<span class="c1"></span>  <span class="n">withQueryDetection</span><span class="o">(</span><span class="s">&quot;EXEC that_proc&quot;</span><span class="o">)</span><span class="o">.</span> <span class="c1">// second detection regex</span>
<span class="c1"></span>  <span class="n">withUpdateHandler</span><span class="o">(</span><span class="k">new</span> <span class="n">CompositeHandler</span><span class="o">.</span><span class="na">UpdateHandler</span><span class="o">(</span><span class="o">)</span> <span class="o">{</span>
    <span class="c1">// Handle execution of update statement (not query)</span>
<span class="c1"></span><span class="nf">    public UpdateResult </span><span class="nf">apply</span><span class="o">(</span><span class="n">String</span> <span class="n">sql</span><span class="o">,</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">Parameter</span><span class="o">&gt;</span> <span class="n">parameters</span><span class="o">)</span> <span class="o">{</span>
      <span class="c1">// ...</span>
<span class="c1"></span>    <span class="o">}</span>
  <span class="o">}</span><span class="o">)</span><span class="o">.</span><span class="na">withQueryHandler</span><span class="o">(</span><span class="k">new</span> <span class="n">CompositeHandler</span><span class="o">.</span><span class="na">QueryHandler</span> <span class="o">(</span><span class="o">)</span> <span class="o">{</span><span class="nf"></span>
<span class="nf">    public QueryResult </span><span class="nf">apply</span><span class="o">(</span><span class="n">String</span> <span class="n">sql</span><span class="o">,</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">Parameter</span><span class="o">&gt;</span> <span class="n">parameters</span><span class="o">)</span> <span class="o">{</span>
      <span class="c1">// ...</span>
<span class="c1"></span>    <span class="o">}</span>
  <span class="o">}</span><span class="o">)</span><span class="o">;</span>

<span class="c1">// Register prepared handler with expected ID 'my-unique-id'</span>
<span class="c1"></span><span class="n">acolyte</span><span class="o">.</span><span class="na">jdbc</span><span class="o">.</span><span class="na">Driver</span><span class="o">.</span><span class="na">register</span><span class="o">(</span><span class="s">&quot;my-unique-id&quot;</span><span class="o">,</span> <span class="n">handler</span><span class="o">)</span><span class="o">;</span>

<span class="c1">// then when existing code do ...</span>
<span class="c1"></span><span class="n">Connection</span> <span class="n">con</span> <span class="o">=</span> <span class="n">DriverManager</span><span class="o">.</span><span class="na">getConnection</span><span class="o">(</span><span class="n">jdbcUrl</span><span class="o">)</span><span class="o">;</span>

<span class="c1">// ... Connection |con| is managed through Acolyte |handler|</span>
<span class="c1"></span>
</pre> 
 </div> 
 <p>You can use Acolyte with various JVM test and persistence frameworks (see <a href="integration.html">Integration guide</a>).</p> 
 <p>With <a href="studio.html">Studio</a>, you can use data extracted from existing database with Acolyte handler.</p> 
 <p><i>Projects using Acolyte:</i></p> 
 <ul> 
  <li><a class="externalLink" href="http://www.playframework.com/">Play Framework</a> Anorm (<a class="externalLink" href="https://github.com/playframework/playframework/blob/master/framework/src/anorm/src/test/jdbc-scala/anorm/AnormSpec.scala">AnormSpec</a>).</li> 
  <li><a class="externalLink" href="https://github.com/cchantep/cielago-tracker">Cielago</a> (<a class="externalLink" href="https://github.com/cchantep/cielago-tracker/blob/master/test/models/DispatchReportSpec.scala">DispatchReportSpec</a>, <a class="externalLink" href="https://github.com/cchantep/cielago-tracker/blob/master/test/models/ListInfoSpec.scala">ListInfoSpec</a>, <a class="externalLink" href="https://github.com/cchantep/cielago-tracker/blob/master/test/controllers/MainSpec.scala">MainSpec</a>, …).</li> 
 </ul> 
 <p>To share questions, answers &amp; ideas, you can go to the <a class="externalLink" href="https://groups.google.com/forum/#!forum/acolyte-support">mailing list</a>.</p> 
</div> 
<div class="section"> 
 <h2 id="Requirements">Requirements</h2> 
 <ul> 
  <li>Java 1.6+</li> 
 </ul> 
</div> 
<div class="section"> 
 <h2 id="Limitations">Limitations</h2> 
 <ul> 
  <li>Limited datatype conversions.</li> 
  <li>Binary datatype are not currently supported.</li> 
  <li>Pseudo-support for transaction.</li> 
  <li>Currency types.</li> 
 </ul> 
</div> 
<div class="section"> 
 <h2 id="Related_applications">Related applications</h2> 
 <ul> 
  <li><a href="./studio.html">Acolyte Studio</a>: Application with CLI and GUI which is useful when you already have a database and want tests to use data extracted from there.</li> 
 </ul> 
</div>
			</div>
		</div>
	</div>
	</div>

	</div><!-- /container -->

	<!-- Footer
	================================================== -->
	<footer class="well">
		<div class="container">
			<div class="row">
				<div class="span9 bottom-nav">
					<ul class="nav nav-list">
						<li class="nav-header">User guide</li>
						<li >
							<a href="java.html" title="Java">Java</a>
						</li>
						<li >
							<a href="scala.html" title="Scala">Scala</a>
						</li>
						<li >
							<a href="faq.html" title="FAQ">FAQ</a>
						</li>
						<li class="nav-header">Integration</li>
						<li >
							<a href="integration.html" title="Guide">Guide</a>
						</li>
						<li >
							<a href="integration.html#Play_Framework" title="Play Framework">Play Framework</a>
						</li>
						<li class="nav-header">Subprojects</li>
						<li >
							<a href="studio.html" title="Acolyte Studio">Acolyte Studio</a>
						</li>
						<li >
							<a href="scalac-plugin.html" title="Scalac plugin">Scalac plugin</a>
						</li>
						<li class="nav-header">Reference</li>
						<li >
							<a href="apidocs/index.html" title="Javadoc">Javadoc</a>
						</li>
						<li >
							<a href="scaladocs/index.html" title="Scaladoc">Scaladoc</a>
						</li>
						<li >
							<a href="build.html" title="Build">Build</a>
						</li>
						<li >
							<a href="changelog.html" title="Changelog">Changelog</a>
						</li>
						<li class="nav-header">Tutorial & Demo</li>
						<li >
							<a href="http://tour.acolyte.eu.org" title="Interactive tour" class="externalLink">Interactive tour</a>
						</li>
						<li >
							<a href="https://github.com/cchantep/acolyte/tree/10m-anorm-tutorial#acolyteanorm-10-minutes-tutorial" title="10m with Anorm" class="externalLink">10m with Anorm</a>
						</li>
						<li class="nav-header">Support</li>
						<li >
							<a href="https://groups.google.com/forum/#!forum/acolyte-support" title="Mailing list" class="externalLink">Mailing list</a>
						</li>
						<li class="nav-header">Project Documentation</li>
						<li >
							<a href="project-info.html" title="Project Information">Project Information <i class="icon-chevron-right"></i></a>
						</li>
					</ul>
				</div>
			</div>
		</div>
	</footer>

	<div class="container subfooter">
		<div class="row">
			<div class="span12">
				<p class="pull-right"><a href="#">Back to top</a></p>
				<p class="copyright">Copyright &copy;2014. All Rights Reserved.</p>
				<p><a href="http://github.com/andriusvelykis/reflow-maven-skin" title="Reflow Maven skin">Reflow Maven skin</a> by <a href="http://andrius.velykis.lt" target="_blank" title="Andrius Velykis">Andrius Velykis</a>.</p>
			</div>
		</div>
	</div>

	<!-- Le javascript
	================================================== -->
	<!-- Placed at the end of the document so the pages load faster -->
	<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>

	<script src="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/js/bootstrap.min.js"></script>
	<script src="./js/lightbox.min.js"></script>
	<script src="./js/reflow-scroll.js"></script>

	<script src="./js/reflow-skin.js"></script>

	</body>
</html>
