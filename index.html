<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia at 2014-05-01 
 | Rendered using Apache Maven Fluido Skin 1.3.1
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20140501" />
    <meta http-equiv="Content-Language" content="en" />
    <title>acolyte - Acolyte</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.3.1.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />

      
    <script type="text/javascript" src="./js/apache-maven-fluido-1.3.1.min.js"></script>

                          
        
<link rel="stylesheet" type="text/css" href="css/pygments.min.css"/>
                      
        
<link rel="stylesheet" type="text/css" href="css/responsive.css"/>
          
                  </head>
        <body class="topBarDisabled">
          
    
    
            
    
        
    <a href="http://github.com/cchantep/acolyte">
      <img style="position: absolute; top: 0; right: 0; border: 0; z-index: 10000;"
        src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png"
        alt="Fork me on GitHub">
    </a>
  
                
                    
    
        <div class="container-fluid">
          <div id="banner">
        <div class="pull-left">
                                <div id="bannerLeft">
                <h2>Acolyte</h2>
                </div>
                      </div>
        <div class="pull-right">  </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
                
                    
                  <li id="publishDate">Last Published: 2014-05-01
                      <span class="divider">|</span>
                   </li>
                  <li id="projectVersion">Version: 1.0.18
                      </li>
                      
                
                    
      
                            </ul>
      </div>

            
      <div class="row-fluid">
        <div id="leftColumn" class="span3">
          <div class="well sidebar-nav">
                
                    
                <ul class="nav nav-list">
                    <li class="nav-header">User guide</li>
                              
      <li>
  
                          <a href="./index.html#Java" title="Java">
          <i class="none"></i>
        Java</a>
            </li>
                
      <li>
  
                          <a href="./index.html#Scala" title="Scala">
          <i class="none"></i>
        Scala</a>
            </li>
                
      <li>
  
                          <a href="./index.html#Play_Framework" title="Play Framework">
          <i class="none"></i>
        Play Framework</a>
            </li>
                
      <li>
  
                          <a href="./faq.html" title="FAQ">
          <i class="none"></i>
        FAQ</a>
            </li>
                              <li class="nav-header">Subprojects</li>
                              
      <li>
  
                          <a href="./studio.html" title="Acolyte Studio">
          <i class="none"></i>
        Acolyte Studio</a>
            </li>
                
      <li>
  
                          <a href="./scalac-plugin.html" title="Scalac plugin">
          <i class="none"></i>
        Scalac plugin</a>
            </li>
                              <li class="nav-header">Reference</li>
                              
      <li>
  
                          <a href="./javadocs/index.html" title="Javadoc">
          <i class="none"></i>
        Javadoc</a>
            </li>
                
      <li>
  
                          <a href="./scaladocs/index.html" title="Scaladoc">
          <i class="none"></i>
        Scaladoc</a>
            </li>
                
      <li>
  
                          <a href="./changelog.html" title="Changelog">
          <i class="none"></i>
        Changelog</a>
            </li>
                              <li class="nav-header">Tutorials</li>
                              
      <li>
  
                          <a href="https://github.com/cchantep/acolyte/tree/10m-anorm-tutorial#acolyteanorm-10-minutes-tutorial" class="externalLink" title="10m with Anorm">
          <i class="none"></i>
        10m with Anorm</a>
            </li>
                              <li class="nav-header">Project Documentation</li>
                                                                                                                    
      <li>
  
                          <a href="project-info.html" title="Project Information">
          <i class="icon-chevron-right"></i>
        Project Information</a>
                  </li>
            </ul>
                
                    
                
          <hr />

           <div id="poweredBy">
                            <div class="clear"></div>
                            <div class="clear"></div>
               
        
        
        <div id="twitter">
    
    <a href="https://twitter.com/cchantep" class="twitter-follow-button" data-show-count="true" data-align="left" data-size="medium" data-show-screen-name="true" data-lang="en">Follow cchantep</a>
    <script type="text/javascript">!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>

        </div>
                   <div class="clear"></div>
                            <div class="clear"></div>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" />
      </a>
                  </div>
          </div>
        </div>
        
                
        <div id="bodyColumn"  class="span9" >
                                  
            <h1>Acolyte</h1>
<p>Acolyte is a JDBC driver designed for cases like mockup, testing, or any case you would like to be able to handle JDBC query by hand (or maybe that&#x2019;s only Chmeee&#x2019;s son on the Ringworld).</p>
<p><a class="externalLink" href="http://travis-ci.org/cchantep/acolyte"><img src="https://secure.travis-ci.org/cchantep/acolyte.png?branch=master" alt="Build Status" /></a></p>
<p>This documentation can be read <a class="externalLink" href="http://cchantep.github.io/acolyte/">online</a>.</p>
<div class="section">
<h2>Advantages for testing<a name="Advantages_for_testing"></a></h2>
<p>TODO</p></div>
<div class="section">
<h2>Requirements<a name="Requirements"></a></h2>

<ul>
  
<li>Java 1.6</li>
</ul></div>
<div class="section">
<h2>Usage<a name="Usage"></a></h2>
<p>Acolyte driver behaves as any other JDBC driver, that&#x2019;s to say you can get a connection from, by using the well-known <tt>java.sql.DriverManager.getConnection(jdbcUrl)</tt> (and its variants).</p>
<p>JDBC URL should match <tt>jdbc:acolyte:anything-you-want?handler=id</tt> (see after for details about <tt>handler</tt> parameter).</p>
<p>Projects using Acolyte:</p>

<ul>
  
<li><a class="externalLink" href="http://www.playframework.com/">Play Framework</a> Anorm (<a class="externalLink" href="https://github.com/playframework/playframework/blob/master/framework/src/anorm/src/test/jdbc-scala/anorm/AnormSpec.scala">AnormSpec</a>).</li>
  
<li><a class="externalLink" href="https://github.com/cchantep/cielago-tracker">Cielago</a> (<a class="externalLink" href="https://github.com/cchantep/cielago-tracker/blob/master/test/models/DispatchReportSpec.scala">DispatchReportSpec</a>, <a class="externalLink" href="https://github.com/cchantep/cielago-tracker/blob/master/test/models/ListInfoSpec.scala">ListInfoSpec</a>, <a class="externalLink" href="https://github.com/cchantep/cielago-tracker/blob/master/test/controllers/MainSpec.scala">MainSpec</a>, &#x2026;).</li>
</ul>
<div class="section">
<h3>Java<a name="Java"></a></h3>
<p>Using Maven 2/3+, Acolyte dependency can be resolved as following from your POM:</p>

<div>
<pre>
<span class="c">&lt;!--</span><span class="c"> ... </span><span class="c">--&gt;</span>

  <span class="nt">&lt;repositories</span><span class="nt">&gt;</span>
    <span class="c">&lt;!--</span><span class="c"> ... </span><span class="c">--&gt;</span>
    <span class="nt">&lt;repository</span><span class="nt">&gt;</span>
      <span class="c">&lt;!--</span><span class="c"> Optional: Get Acolyte release quicker than Maven Central repo </span><span class="c">--&gt;</span>
      <span class="nt">&lt;id</span><span class="nt">&gt;</span>applicius-releases<span class="nt">&lt;/id&gt;</span>
      <span class="nt">&lt;name</span><span class="nt">&gt;</span>Applicius Maven2 Snapshots Repository<span class="nt">&lt;/name&gt;</span>
      <span class="nt">&lt;url</span><span class="nt">&gt;</span>https://raw.github.com/applicius/mvn-repo/master/releases/<span class="nt">&lt;/url&gt;</span>
    <span class="nt">&lt;/repository&gt;</span>
  <span class="nt">&lt;/repositories&gt;</span>

  <span class="nt">&lt;dependencies</span><span class="nt">&gt;</span>
    <span class="c">&lt;!--</span><span class="c"> ... </span><span class="c">--&gt;</span>
    <span class="nt">&lt;dependency</span><span class="nt">&gt;</span>
      <span class="nt">&lt;groupId</span><span class="nt">&gt;</span>org.eu.acolyte<span class="nt">&lt;/groupId&gt;</span>
      <span class="nt">&lt;artifactId</span><span class="nt">&gt;</span>jdbc-driver<span class="nt">&lt;/artifactId&gt;</span>
      <span class="nt">&lt;version</span><span class="nt">&gt;</span>VERSION<span class="nt">&lt;/version&gt;</span>
    <span class="nt">&lt;/dependency&gt;</span>
  <span class="nt">&lt;/dependencies&gt;</span>

</pre></div>
<p>Then code could be:</p>

<div>
<pre>
<span class="kn">import</span> <span class="nn">java.util.List</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.sql.DriverManager</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.sql.Connection</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.sql.Date</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">acolyte.ConnectionHandler</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">acolyte.StatementHandler</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">acolyte.CompositeHandler</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">acolyte.RowList3</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">acolyte.Result</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">acolyte.Rows</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">acolyte.StatementHandler.Parameter</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">static</span> <span class="n">acolyte</span><span class="o">.</span><span class="na">RowLists</span><span class="o">.</span><span class="na">rowList3</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">acolyte</span><span class="o">.</span><span class="na">Rows</span><span class="o">.</span><span class="na">row3</span><span class="o">;</span>

<span class="c1">// ...</span>
<span class="c1"></span>
<span class="c1">// Configure in anyway JDBC with following url,</span>
<span class="c1"></span><span class="c1">// declaring handler registered with 'my-unique-id' will be used.</span>
<span class="c1"></span><span class="kd">final</span> <span class="n">String</span> <span class="n">jdbcUrl</span> <span class="o">=</span> <span class="s">&quot;jdbc:acolyte:anything-you-want?handler=my-unique-id&quot;</span>

<span class="c1">// Prepare handler</span>
<span class="c1"></span><span class="n">StatementHandler</span> <span class="n">handler</span> <span class="o">=</span><span class="nf"> new </span><span class="nf">CompositeHandler</span><span class="o">(</span><span class="o">)</span><span class="o">.</span>
  <span class="n">withQueryDetection</span><span class="o">(</span><span class="s">&quot;^SELECT &quot;</span><span class="o">)</span><span class="o">.</span> <span class="c1">// regex test from beginning</span>
<span class="c1"></span>  <span class="n">withQueryDetection</span><span class="o">(</span><span class="s">&quot;EXEC that_proc&quot;</span><span class="o">)</span><span class="o">.</span> <span class="c1">// second detection regex</span>
<span class="c1"></span>  <span class="n">withUpdateHandler</span><span class="o">(</span><span class="k">new</span> <span class="n">CompositeHandler</span><span class="o">.</span><span class="na">UpdateHandler</span><span class="o">(</span><span class="o">)</span> <span class="o">{</span>
    <span class="c1">// Handle execution of update statement (not query)</span>
<span class="c1"></span><span class="nf">    public UpdateResult </span><span class="nf">apply</span><span class="o">(</span><span class="n">String</span> <span class="n">sql</span><span class="o">,</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">Parameter</span><span class="o">&gt;</span> <span class="n">parameters</span><span class="o">)</span> <span class="o">{</span>
      <span class="c1">// ...</span>
<span class="c1"></span>      <span class="k">return</span> <span class="n">UpdateResult</span><span class="o">.</span><span class="na">Nothing</span><span class="o">;</span>
    <span class="o">}</span>
  <span class="o">}</span><span class="o">)</span><span class="o">.</span><span class="na">withQueryHandler</span><span class="o">(</span><span class="k">new</span> <span class="n">CompositeHandler</span><span class="o">.</span><span class="na">QueryHandler</span> <span class="o">(</span><span class="o">)</span> <span class="o">{</span><span class="nf"></span>
<span class="nf">    public QueryResult </span><span class="nf">apply</span><span class="o">(</span><span class="n">String</span> <span class="n">sql</span><span class="o">,</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">Parameter</span><span class="o">&gt;</span> <span class="n">parameters</span><span class="o">)</span> <span class="o">{</span>
      <span class="c1">// ...</span>
<span class="c1"></span>
      <span class="c1">// Prepare list of 2 rows</span>
<span class="c1"></span>      <span class="c1">// with 3 columns of types String, Float, Date</span>
<span class="c1"></span>      <span class="n">RowList3</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">Float</span><span class="o">,</span> <span class="n">Date</span><span class="o">&gt;</span> <span class="n">rows</span> <span class="o">=</span> 
        <span class="n">rowList3</span><span class="o">(</span><span class="n">String</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="n">Float</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="n">Date</span><span class="o">.</span><span class="na">class</span><span class="o">)</span><span class="o">.</span>
        <span class="n">withLabel</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="s">&quot;String&quot;</span><span class="o">)</span><span class="o">.</span><span class="na">withLabel</span><span class="o">(</span><span class="mi">3</span><span class="o">,</span> <span class="s">&quot;Date&quot;</span><span class="o">)</span><span class="o">.</span> <span class="c1">// Optional: set labels</span>
<span class="c1"></span>        <span class="n">append</span><span class="o">(</span><span class="s">&quot;str&quot;</span><span class="o">,</span> <span class="mf">1.2f</span><span class="o">,</span><span class="nf"> new </span><span class="nf">Date</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">)</span><span class="o">)</span><span class="o">.</span> <span class="c1">// values append</span>
<span class="c1"></span>        <span class="n">append</span><span class="o">(</span><span class="s">&quot;val&quot;</span><span class="o">,</span> <span class="mf">2.34f</span><span class="o">,</span> <span class="kc">null</span><span class="o">)</span><span class="o">;</span>

      <span class="k">return</span> <span class="n">rows</span><span class="o">.</span><span class="na">asResult</span><span class="o">(</span><span class="o">)</span><span class="o">;</span>
    <span class="o">}</span>
  <span class="o">}</span><span class="o">)</span><span class="o">;</span>

<span class="c1">// Register prepared handler with expected ID 'my-unique-id'</span>
<span class="c1"></span><span class="n">acolyte</span><span class="o">.</span><span class="na">Driver</span><span class="o">.</span><span class="na">register</span><span class="o">(</span><span class="s">&quot;my-unique-id&quot;</span><span class="o">,</span> <span class="n">handler</span><span class="o">)</span><span class="o">;</span>

<span class="c1">// then ...</span>
<span class="c1"></span><span class="n">Connection</span> <span class="n">con</span> <span class="o">=</span> <span class="n">DriverManager</span><span class="o">.</span><span class="na">getConnection</span><span class="o">(</span><span class="n">jdbcUrl</span><span class="o">)</span><span class="o">;</span>

<span class="c1">// ... Connection |con| is managed through |handler|</span>
<span class="c1"></span>
</pre></div>
<p>You can see more <a class="externalLink" href="https://github.com/cchantep/acolyte/blob/master/jdbc-driver/src/test/java/usecase/JavaUseCases.java">use cases</a> whose expectations are visible in <a class="externalLink" href="https://github.com/cchantep/acolyte/blob/master/jdbc-driver/src/test/jdbc-scala/acolyte/AcolyteSpec.scala">specifications</a>.</p>
<div class="section">
<h4>Connection<a name="Connection"></a></h4>
<p>Connection to Acolyte can be accessed by JDBC URL, if your handler has been registered against driver:</p>

<div>
<pre>
<span class="c1">// Register prepared handler with expected ID 'my-unique-id'</span>
<span class="c1"></span><span class="c1">// handler: acolyte.ConnectionHandler or acolyte.StatementHandler instance</span>
<span class="c1"></span><span class="n">acolyte</span><span class="o">.</span><span class="na">Driver</span><span class="o">.</span><span class="na">register</span><span class="o">(</span><span class="s">&quot;my-unique-id&quot;</span><span class="o">,</span> <span class="n">handler</span><span class="o">)</span><span class="o">;</span>

<span class="c1">// then ...</span>
<span class="c1"></span><span class="c1">// ... later as handler has registered with 'my-unique-id'</span>
<span class="c1"></span><span class="kd">final</span> <span class="n">String</span> <span class="n">jdbcUrl</span> <span class="o">=</span> <span class="s">&quot;jdbc:acolyte:anything-you-want?handler=my-unique-id&quot;</span>

<span class="n">Connection</span> <span class="n">con</span> <span class="o">=</span> <span class="n">DriverManager</span><span class="o">.</span><span class="na">getConnection</span><span class="o">(</span><span class="n">jdbcUrl</span><span class="o">)</span><span class="o">;</span>
<span class="c1">// ... Connection |con| is managed through |handler|</span>
<span class="c1"></span>
</pre></div>
<p>If you just need/want to directly get connection from <tt>acolyte.Driver</tt>, without using JDBC driver registry, you can use Acolyte direct connection:</p>

<div>
<pre>
<span class="c1">// handler: acolyte.ConnectionHandler or acolyte.StatementHandler instance</span>
<span class="c1"></span><span class="n">Connection</span> <span class="n">con</span> <span class="o">=</span> <span class="n">acolyte</span><span class="o">.</span><span class="na">Driver</span><span class="o">.</span><span class="na">connection</span><span class="o">(</span><span class="n">handler</span><span class="o">)</span><span class="o">;</span>
</pre></div></div>
<div class="section">
<h4>Connection properties<a name="Connection_properties"></a></h4>
<p>JDBC allows to pass properties to driver to customize connection creation:</p>

<div>
<pre>
<span class="n">Connection</span> <span class="n">con</span> <span class="o">=</span> <span class="n">DriverManager</span><span class="o">.</span><span class="na">getConnection</span><span class="o">(</span><span class="n">jdbcUrl</span><span class="o">,</span> <span class="n">someJavaUtilProps</span><span class="o">)</span><span class="o">;</span>
<span class="n">Connection</span> <span class="n">con</span> <span class="o">=</span> <span class="n">acolyte</span><span class="o">.</span><span class="na">Driver</span><span class="o">.</span><span class="na">connection</span><span class="o">(</span><span class="n">handler</span><span class="o">,</span> <span class="n">someJavaUtilProps</span><span class="o">)</span><span class="o">;</span>
</pre></div>
<p>Acolyte specific properties are:</p>

<ul>
  
<li><tt>acolyte.parameter.untypedNull</tt>: If <tt>&quot;true&quot;</tt>, Acolyte fallbacks untyped null from <tt>statement.setObject(p, null)</tt> to null string (default: false).</li>
  
<li><tt>acolyte.batch.continueOnError</tt>: If <tt>&quot;true&quot;</tt>, Acolyte doesn&#x2019;t stop executing batch on statement, but continue processing and finally throw <tt>BatchUpdateException</tt> with update counts of successfully executed elements (see <a class="externalLink" href="http://docs.oracle.com/javase/7/docs/api/java/sql/Statement.html#executeBatch%28%29">java.sql.Statement#executeBatch</a>).</li>
</ul></div>
<div class="section">
<h4>Query result creation<a name="Query_result_creation"></a></h4>
<p>Acolyte provides <a class="externalLink" href="http://cchantep.github.io/acolyte/apidocs/acolyte/Row.html">Row</a> and <a class="externalLink" href="http://cchantep.github.io/acolyte/apidocs/acolyte/RowList.html">RowList</a> classes (and their sub-classes) to allow easy and typesafe creation of result.</p>
<p>Row lists can be built as following using <a class="externalLink" href="http://cchantep.github.io/acolyte/apidocs/acolyte/RowLists.html">RowLists factory</a>.</p>

<div>
<pre>
<span class="kn">import</span> <span class="nn">acolyte.RowList1</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">acolyte.RowList3</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">static</span> <span class="n">acolyte</span><span class="o">.</span><span class="na">RowLists</span><span class="o">.</span><span class="na">rowList1</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">acolyte</span><span class="o">.</span><span class="na">RowLists</span><span class="o">.</span><span class="na">rowList3</span><span class="o">;</span> 

<span class="c1">// ...</span>
<span class="c1"></span>
<span class="n">RowList1</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">list1</span> <span class="o">=</span> <span class="n">RowLists</span><span class="o">.</span><span class="na">rowList1</span><span class="o">(</span><span class="n">String</span><span class="o">.</span><span class="na">class</span><span class="o">)</span><span class="o">;</span>

<span class="n">RowList3</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">,</span> <span class="n">Float</span><span class="o">,</span> <span class="n">Character</span><span class="o">&gt;</span> <span class="n">list2</span> <span class="o">=</span><span class="nf"> RowLists.</span>
<span class="nf">  </span><span class="nf">rowList3</span><span class="o">(</span><span class="n">Integer</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="n">Float</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="n">Character</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
</pre></div>
<p>In previous example, <tt>list1</tt> is a list of row with 1 column whose class is <tt>String</tt> (<tt>VARCHAR</tt> as for JDBC/SQL type). Considering <tt>list2</tt>, it is a list of row with 3 columns, whose classes are <tt>Integer</tt>, <tt>Float</tt> and <tt>Character</tt>.</p>
<p>Column names/labels can also be setup (column first index is 1):</p>

<div>
<pre>
<span class="c1">// ...</span>
<span class="c1"></span>
<span class="n">list1</span> <span class="o">=</span> <span class="n">list1</span><span class="o">.</span><span class="na">withLabel</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="s">&quot;first label&quot;</span><span class="o">)</span><span class="o">;</span>

<span class="n">list2</span> <span class="o">=</span> <span class="n">list2</span><span class="o">.</span><span class="na">withLabel</span><span class="o">(</span><span class="mi">2</span><span class="o">,</span> <span class="s">&quot;first label&quot;</span><span class="o">)</span><span class="o">.</span><span class="na">withLabel</span><span class="o">(</span><span class="mi">3</span><span class="o">,</span> <span class="s">&quot;third name&quot;</span><span class="o">)</span><span class="o">;</span>
</pre></div>
<p>Both column classes and names can be declared in bulk way, using <a class="externalLink" href="http://cchantep.github.io/acolyte/apidocs/acolyte/RowList.Column.html">definition class</a>:</p>

<div>
<pre>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">acolyte</span><span class="o">.</span><span class="na">RowList</span><span class="o">.</span><span class="na">Column</span><span class="o">;</span>

<span class="c1">// ...</span>
<span class="c1"></span>
<span class="n">RowList1</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">list1</span> <span class="o">=</span><span class="nf"> RowLists.</span>
<span class="nf">  </span><span class="nf">rowList1</span><span class="o">(</span><span class="n">Column</span><span class="o">(</span><span class="n">String</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="s">&quot;first label&quot;</span><span class="o">)</span><span class="o">)</span><span class="o">;</span>

<span class="n">RowList3</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">,</span> <span class="n">Float</span><span class="o">,</span> <span class="n">Character</span><span class="o">&gt;</span> <span class="n">list2</span> <span class="o">=</span><span class="nf"> RowLists.</span>
<span class="nf">  </span><span class="nf">rowList3</span><span class="o">(</span><span class="n">Column</span><span class="o">(</span><span class="n">Integer</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="s">&quot;1st&quot;</span><span class="o">)</span><span class="o">,</span> 
           <span class="n">Column</span><span class="o">(</span><span class="n">Float</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="s">&quot;2nd&quot;</span><span class="o">)</span><span class="o">,</span> 
           <span class="n">Column</span><span class="o">(</span><span class="n">Character</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="s">&quot;3rd&quot;</span><span class="o">)</span><span class="o">)</span><span class="o">;</span>
</pre></div>
<p>Once you have declared your row list, and before turning it as result set, you can either add rows to it, or leave it empty.</p>

<div>
<pre>
<span class="kn">import</span> <span class="nn">java.sql.ResultSet</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">static</span> <span class="n">acolyte</span><span class="o">.</span><span class="na">Rows</span><span class="o">.</span><span class="na">row1</span><span class="o">;</span>

<span class="c1">// ...</span>
<span class="c1"></span>
<span class="c1">// we have declared list1 and list2 (see previous example)</span>
<span class="c1"></span>
<span class="n">list1</span> <span class="o">=</span> <span class="n">list1</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="s">&quot;str&quot;</span><span class="o">)</span><span class="o">;</span>

<span class="n">ResultSet</span> <span class="n">rs1</span> <span class="o">=</span> <span class="n">list1</span><span class="o">.</span><span class="na">resultSet</span><span class="o">(</span><span class="o">)</span><span class="o">;</span>
<span class="n">ResultSet</span> <span class="n">rs2</span> <span class="o">=</span> <span class="n">list2</span><span class="o">.</span><span class="na">resultSet</span><span class="o">(</span><span class="o">)</span><span class="o">;</span>
</pre></div>
<p>From previous example, result set <tt>rs1</tt> will contain 1 row, whereas <tt>rs2</tt> is empty.</p>
<p>Take care to <tt>list1 = list1.append(&quot;str&quot;);</tt>. As provided <tt>RowList</tt> classes are immutable, you should get updated instance from <tt>append</tt> to work on the list containing added row. This is more safe, and allow to rewrite previous example like:</p>

<div>
<pre>
<span class="n">ResultSet</span> <span class="n">rs1</span> <span class="o">=</span> <span class="n">list1</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="s">&quot;str&quot;</span><span class="o">)</span><span class="o">.</span><span class="na">resultSet</span><span class="o">(</span><span class="o">)</span><span class="o">;</span>
<span class="n">ResultSet</span> <span class="n">rs2</span> <span class="o">=</span> <span class="n">list2</span><span class="o">.</span><span class="na">resultSet</span><span class="o">(</span><span class="o">)</span><span class="o">;</span>
</pre></div>
<p><a class="externalLink" href="http://cchantep.github.io/acolyte/apidocs/acolyte/RowLists.html">RowLists factory</a> also provide convinience constructor for single column row list:</p>

<div>
<pre>
<span class="c1">// Instead of RowLists.rowList1(String.class).append(&quot;string&quot;) ...</span>
<span class="c1"></span><span class="n">RowLists</span><span class="o">.</span><span class="na">stringList</span><span class="o">(</span><span class="o">)</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="s">&quot;string&quot;</span><span class="o">)</span><span class="o">;</span>
<span class="n">RowLists</span><span class="o">.</span><span class="na">stringList</span><span class="o">(</span><span class="s">&quot;string&quot;</span><span class="cm">/* ... */</span><span class="o">)</span><span class="o">;</span> <span class="c1">// init with value(s)</span>
<span class="c1"></span>
<span class="c1">// Instead of RowLists.rowList1(Boolean.TYPE).append(true) ...</span>
<span class="c1"></span><span class="n">RowLists</span><span class="o">.</span><span class="na">booleanList</span><span class="o">(</span><span class="o">)</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="kc">true</span><span class="o">)</span><span class="o">;</span>
<span class="n">RowLists</span><span class="o">.</span><span class="na">booleanList</span><span class="o">(</span><span class="kc">true</span><span class="cm">/* ... */</span><span class="o">)</span><span class="o">;</span>

<span class="c1">// Instead of RowLists.rowList1(Byte.TYPE).append((byte)1) ...</span>
<span class="c1"></span><span class="n">RowLists</span><span class="o">.</span><span class="na">byteList</span><span class="o">(</span><span class="o">)</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="o">(</span><span class="kt">byte</span><span class="o">)</span><span class="mi">1</span><span class="o">)</span><span class="o">;</span>
<span class="n">RowLists</span><span class="o">.</span><span class="na">byteList</span><span class="o">(</span><span class="o">(</span><span class="kt">byte</span><span class="o">)</span><span class="mi">1</span><span class="cm">/* ... */</span><span class="o">)</span><span class="o">;</span>

<span class="c1">// Instead of RowLists.rowList1(Short.TYPE).append((short)1) ...</span>
<span class="c1"></span><span class="n">RowLists</span><span class="o">.</span><span class="na">shortList</span><span class="o">(</span><span class="o">)</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="o">(</span><span class="kt">short</span><span class="o">)</span><span class="mi">1</span><span class="o">)</span><span class="o">;</span>
<span class="n">RowLists</span><span class="o">.</span><span class="na">shortList</span><span class="o">(</span><span class="o">(</span><span class="kt">short</span><span class="o">)</span><span class="mi">1</span><span class="cm">/* ... */</span><span class="o">)</span><span class="o">;</span>

<span class="c1">// Instead of RowLists.rowList1(Integer.TYPE).append(1) ...</span>
<span class="c1"></span><span class="n">RowLists</span><span class="o">.</span><span class="na">intList</span><span class="o">(</span><span class="o">)</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="mi">1</span><span class="o">)</span><span class="o">;</span>
<span class="n">RowLists</span><span class="o">.</span><span class="na">intList</span><span class="o">(</span><span class="mi">1</span><span class="cm">/* ... */</span><span class="o">)</span><span class="o">;</span>

<span class="c1">// Instead of RowLists.rowList1(Long.TYPE).append(1l) ...</span>
<span class="c1"></span><span class="n">RowLists</span><span class="o">.</span><span class="na">longList</span><span class="o">(</span><span class="o">)</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="mi">1</span><span class="n">l</span><span class="o">)</span><span class="o">;</span>
<span class="n">RowLists</span><span class="o">.</span><span class="na">longList</span><span class="o">(</span><span class="mi">1</span><span class="n">l</span><span class="cm">/* ... */</span><span class="o">)</span><span class="o">;</span>

<span class="c1">// Instead of RowLists.rowList1(Float.TYPE).append(1f) ...</span>
<span class="c1"></span><span class="n">RowLists</span><span class="o">.</span><span class="na">floatList</span><span class="o">(</span><span class="o">)</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="mi">1</span><span class="n">f</span><span class="o">)</span><span class="o">;</span>
<span class="n">RowLists</span><span class="o">.</span><span class="na">floatList</span><span class="o">(</span><span class="mi">1</span><span class="n">f</span><span class="cm">/* ... */</span><span class="o">)</span><span class="o">;</span>

<span class="c1">// Instead of RowLists.rowList1(Double.TYPE).append(1d) ...</span>
<span class="c1"></span><span class="n">RowLists</span><span class="o">.</span><span class="na">doubleList</span><span class="o">(</span><span class="o">)</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="mi">1</span><span class="n">d</span><span class="o">)</span><span class="o">;</span>
<span class="n">RowLists</span><span class="o">.</span><span class="na">doubleList</span><span class="o">(</span><span class="mi">1</span><span class="n">d</span><span class="cm">/* ... */</span><span class="o">)</span><span class="o">;</span>

<span class="c1">// Instead of RowLists.rowList1(BigDecimal.class).append(bigDecimal) ...</span>
<span class="c1"></span><span class="n">RowLists</span><span class="o">.</span><span class="na">bigDecimalList</span><span class="o">(</span><span class="o">)</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">bigDecimal</span><span class="o">)</span><span class="o">;</span>
<span class="n">RowLists</span><span class="o">.</span><span class="na">bigDecimalList</span><span class="o">(</span><span class="n">bigDecimal</span><span class="cm">/* ... */</span><span class="o">)</span><span class="o">;</span>

<span class="c1">// Instead of RowLists.rowList1(Date.class).append(date) ...</span>
<span class="c1"></span><span class="n">RowLists</span><span class="o">.</span><span class="na">dateList</span><span class="o">(</span><span class="o">)</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">date</span><span class="o">)</span><span class="o">;</span>
<span class="n">RowLists</span><span class="o">.</span><span class="na">dateList</span><span class="o">(</span><span class="n">date</span><span class="cm">/* ... */</span><span class="o">)</span><span class="o">;</span>

<span class="c1">// Instead of RowLists.rowList1(Time.class).append(time) ...</span>
<span class="c1"></span><span class="n">RowLists</span><span class="o">.</span><span class="na">timeList</span><span class="o">(</span><span class="o">)</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">time</span><span class="o">)</span><span class="o">;</span>
<span class="n">RowLists</span><span class="o">.</span><span class="na">timeList</span><span class="o">(</span><span class="n">time</span><span class="cm">/* ... */</span><span class="o">)</span><span class="o">;</span>

<span class="c1">// Instead of RowLists.rowList1(Timestamp.class).append(ts) ...</span>
<span class="c1"></span><span class="n">RowLists</span><span class="o">.</span><span class="na">timestampList</span><span class="o">(</span><span class="o">)</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">tsRow</span><span class="o">)</span><span class="o">;</span>
<span class="n">RowLists</span><span class="o">.</span><span class="na">timestampList</span><span class="o">(</span><span class="n">tsRow</span><span class="cm">/* ... */</span><span class="o">)</span><span class="o">;</span>
</pre></div></div>
<div class="section">
<h4>SQL Warnings<a name="SQL_Warnings"></a></h4>
<p>Acolyte can also mock up SQL warnings, on update or query, so that <tt>java.sql.Statement.getWarnings()</tt> will returned expected instance.</p>

<div>
<pre>
<span class="kn">import</span> <span class="nn">acolute.UpdateResult</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">acolyte.QueryResult</span><span class="o">;</span>

<span class="c1">// ...</span>
<span class="c1"></span>
<span class="c1">// Update results to be returned from an acolyte.UpdateHandler</span>
<span class="c1"></span><span class="n">UpdateResult</span> <span class="n">upNothingWarn</span> <span class="o">=</span> <span class="n">UpdateResult</span><span class="o">.</span><span class="na">Nothing</span><span class="o">.</span><span class="na">withWarning</span><span class="o">(</span><span class="s">&quot;Nothing&quot;</span><span class="o">)</span><span class="o">;</span>
<span class="n">UpdateResult</span> <span class="n">up1ResWithWarn</span> <span class="o">=</span> <span class="n">UpdateResult</span><span class="o">.</span><span class="na">One</span><span class="o">.</span><span class="na">withWarning</span><span class="o">(</span><span class="s">&quot;Warning 1&quot;</span><span class="o">)</span><span class="o">;</span>
<span class="n">UpdateResult</span> <span class="n">up10ResWithWarn</span> <span class="o">=</span><span class="nf"> new </span><span class="nf">UpdateResult</span><span class="o">(</span><span class="mi">10</span><span class="o">)</span><span class="o">.</span>
  <span class="n">withWarning</span><span class="o">(</span><span class="s">&quot;updateCount = 10 with warning&quot;</span><span class="o">)</span><span class="o">;</span>

<span class="c1">// Query result (wrapping row list) to be returned from acolyte.QueryHandler</span>
<span class="c1"></span><span class="n">QueryResult</span> <span class="n">nilWithWarning</span> <span class="o">=</span> <span class="n">QueryResult</span><span class="o">.</span><span class="na">Nil</span><span class="o">.</span><span class="na">withWarning</span><span class="o">(</span><span class="s">&quot;Nil with warning&quot;</span><span class="o">)</span><span class="o">;</span>
<span class="n">QueryResult</span> <span class="n">resWithWarning</span> <span class="o">=</span> <span class="n">aRowList</span><span class="o">.</span><span class="na">asResult</span><span class="o">(</span><span class="o">)</span><span class="o">.</span>
  <span class="n">withWarning</span><span class="o">(</span><span class="s">&quot;Row list result with warning&quot;</span><span class="o">)</span><span class="o">;</span>
</pre></div></div>
<div class="section">
<h4>Generated keys<a name="Generated_keys"></a></h4>
<p>Update case not only returning update count but also generated keys can be represented with <tt>UpdateResult</tt>:</p>

<div>
<pre>
<span class="kn">import</span> <span class="nn">acolyte.UpdateResult</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">acolyte.RowLists</span><span class="o">;</span>

<span class="c1">// Result with update count == 1 and a generated key 2L</span>
<span class="c1"></span><span class="n">UpdateResult</span><span class="o">.</span><span class="na">One</span><span class="o">.</span><span class="na">withGeneratedKeys</span><span class="o">(</span><span class="n">RowLists</span><span class="o">.</span><span class="na">longList</span><span class="o">(</span><span class="o">)</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="mi">2L</span><span class="o">)</span><span class="o">)</span><span class="o">;</span>
</pre></div>
<p>Keys specified on result will be given to JDBC statement <tt>.getGeneratedKeys()</tt>.</p></div></div>
<div class="section">
<h3>Scala<a name="Scala"></a></h3>
<p>Module <tt>jdbc-scala</tt> provide a Scala DSL to use more friendly Acolyte features.</p>
<p>Using SBT, Acolyte dependency can resolved as following:</p>

<div>
<pre>resolvers += 
  &quot;Applicius Snapshots&quot; at &quot;https://raw.github.com/applicius/mvn-repo/master/snapshots/&quot;

libraryDependencies += &quot;org.eu.acolyte&quot; %% &quot;jdbc-scala&quot; % &quot;VERSION&quot; % &quot;test&quot;
</pre></div>
<p>Then code could be:</p>

<div>
<pre>import java.sql.{ Connection &#x21d2; SqlConnection, Date, DriverManager }
import acolyte.{ Driver &#x21d2; AcolyteDriver, Execution }
import acolyte.RowLists.{ rowList1, rowList3 }
import acolyte.Rows.row3
import acolyte.Acolyte // DSL
import acolyte.Implicits._

// ...

// Prepare handler
val handler: CompositeHandler = Acolyte.handleStatement.
  withQueryDetection(
    &quot;^SELECT &quot;, // regex test from beginning
    &quot;EXEC that_proc&quot;). // second detection regex
  withUpdateHandler { e: Execution &#x21d2;
    if (e.sql.startsWith(&quot;DELETE &quot;)) {
      // Process deletion ...
      /* deleted = */ 2;
    } else {
      // ... Process ...
      /* count = */ 1;
    }
  } withQueryHandler { e: Execution &#x21d2;
    if (e.sql.startsWith(&quot;SELECT &quot;)) {
      // Empty resultset with 1 text column declared
      rowList1(String.class).asResult
    } else {
      // ... EXEC that_proc
      // (see previous withQueryDetection)

      // Prepare list of 2 rows
      // with 3 columns of types String, Float, Date
      rowList3(classOf[String], classOf[Float], classOf[Date]).
        withLabels( // Optional: set labels
          1 -&gt; &quot;String&quot;,
          3 -&gt; &quot;Date&quot;)
        :+ (&quot;str&quot;, 1.2f, new Date(1l)) // tuple as row 
        :+ (&quot;val&quot;, 2.34f, null)).
        asResult

    }
  }

// Register prepared handler with expected ID 'my-handler-id'
AcolyteDriver.register(&quot;my-handler-id&quot;, handler)

// ... then connection is managed through |handler|
DriverManager.getConnection(jdbcUrl)
</pre></div>
<p>You can see detailed <a class="externalLink" href="https://github.com/cchantep/acolyte/blob/master/jdbc-scala/src/test/jdbc-scala/acolyte/ScalaUseCases.scala">use cases</a> whose expectations are visible in <a class="externalLink" href="https://github.com/cchantep/acolyte/blob/master/jdbc-scala/src/test/jdbc-scala/acolyte/AcolyteSpec.scala">specifications</a>.</p>
<p>It&#x2019;s also possible to get directly get an Acolyte connection, without using JDBC driver registry:</p>

<div>
<pre>import acolyte.Acolyte.connection

val con = connection(handler)
</pre></div>
<div class="section">
<h4>Query handler<a name="Query_handler"></a></h4>
<p>In Scala query handler, pattern matching can be use to easily describe result case:</p>

<div>
<pre>import acolyte.{ QueryExecution, DefinedParameter, ExecutedParameter }

handleStatement.withQueryDetection(&quot;^SELECT&quot;).
  withQueryHandler { e: QueryExecution &#x21d2; 
    // ...

    e match {
      case QueryExecution(sql, DefinedParameter(&quot;str&quot;, _) :: Nil)
        if sql.startsWith(&quot;SELECT&quot;) &#x21d2;
        // result when sql starts with SELECT
        // and there is only 1 parameter with &quot;str&quot; value

      case QueryExecution(_, 
        ExecutedParameter(_) :: ExecutedParameter(2) :: _) &#x21d2;
        // result when there is at least 2 parameters for any sql
        // with the second having integer value 2
    }
  }
</pre></div>
<p>Partial function can also be used to describe handled cases:</p>

<div>
<pre>/* ... */ withUpdateHandler {
  case UpdateExecution(&quot;SELECT 1&quot;, Nil) =&gt; /* case 1 */
  case UpdateExecution(&quot;SELECT 2&quot;, p1 :: Nil) =&gt; /* case 2 */
  /* ... */
}
</pre></div>
<p>With <a href="./scalac-plugin.html">scalac plugin</a>, extractor <tt>ExecutedStatement(regex, params)</tt> can be used with <a class="externalLink" href="https://github.com/cchantep/acolyte/blob/master/jdbc-driver/src/test/jdbc-scala/acolyte/ExecutionSpec.scala">rich pattern matching</a>:</p>

<div>
<pre>e/*: Execution match {
  case ~(ExecutedStatement(&quot;^SELECT&quot;), // if sql starts with SELECT
    (matchingSql, ExecutedParameter(&quot;strVal&quot;) :: Nil)) =&gt; /* ... */
}
</pre></div>
<p>If you plan only to handle query (not update) statements, <tt>handleQuery</tt> can be used:</p>

<div>
<pre>handleQuery withQueryHandler { e &#x21d2; &#x2026; }
</pre></div>
<p>When you only need connection for a single result case, <tt>withQueryResult</tt> is useful:</p>

<div>
<pre>import acolyte.Acolyte

// res: acolyte.QueryResult
val str: String = Acolyte.withQueryResult(res) { connection &#x21d2; &#x2026; }
</pre></div></div>
<div class="section">
<h4>Generated keys<a name="Generated_keys"></a></h4>
<p>Update case not only returning update count but also generated keys can be represented with <tt>UpdateResult</tt>:</p>

<div>
<pre>
<span class="kn">import</span> <span class="nn">acolyte.</span><span class="o">{</span> <span class="n">Acolyte</span><span class="o">,</span> <span class="n">RowLists</span> <span class="o">}</span>

<span class="c1">// Result with update count == 1 and a generated key 2L</span>
<span class="c1"></span><span class="n">Acolyte</span><span class="o">.</span><span class="na">updateResult</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="n">RowLists</span><span class="o">.</span><span class="na">longList</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="mi">2L</span><span class="o">)</span><span class="o">)</span>
</pre></div>
<p>Keys specified on result will be given to JDBC statement <tt>.getGeneratedKeys</tt>.</p></div></div>
<div class="section">
<h3>Anorm<a name="Anorm"></a></h3>
<p>Acolyte is useful to write test about persistence in projects using <a class="externalLink" href="http://www.playframework.com/documentation/2.2.x/ScalaAnorm">Anorm</a>: read <a class="externalLink" href="https://github.com/cchantep/acolyte/tree/10m-anorm-tutorial#acolyteanorm-10-minutes-tutorial">10 minutes tutorial about Acolyte with Anorm</a>.</p></div>
<div class="section">
<h3>Play Framework<a name="Play_Framework"></a></h3>
<p>Acolyte can be easily used with Play test helpers.</p>
<p>First step is to create a Play fake application:</p>

<div>
<pre>import play.api.test.FakeApplication
import acolyte.{ StatementHandler }

def fakeApp(h: Option[StatementHandler] = None): FakeApplication =
  FakeApplication(additionalConfiguration = Map(
    &quot;application.secret&quot; -&gt; &quot;test&quot;,
    &quot;evolutionplugin&quot; -&gt; &quot;disabled&quot;) ++ h.fold(Map[String, String]())(
      handler &#x21d2; {
        val id = System.identityHashCode(this).toString
        acolyte.Driver.register(id, handler)

        Map(&quot;db.default.driver&quot; -&gt; &quot;acolyte.Driver&quot;,
          &quot;db.default.url&quot; -&gt; &quot;jdbc:acolyte:test?handler=%s&quot;.format(id))
      }))
</pre></div>
<p>Then Play/DB test can be performed as following:</p>

<div>
<pre>lazy val handler = Some(handleStatement.
  withQueryDetection(&quot;^SELECT&quot;) withQueryHandler { e &#x21d2;
    // Any Acolyte result
  })

Helpers.running(fakeApp(handler)) {
  DB withConnection { con &#x21d2;
    // Connection |con| will use provided |handler|
    // So any DB related test can be done there
  }
}
</pre></div>
<div class="section">
<h4>Update/query handlers<a name="Updatequery_handlers"></a></h4>
<p>As implicit conversions are provided for <tt>QueryResult</tt>, query handler <tt>QueryExecution =&gt; QueryResult</tt> can be defined with following alternatives.</p>

<ul>
  
<li><tt>QueryExecution =&gt; RowList</tt>: query result as given row lists.</li>
  
<li><tt>QueryExecution =&gt; T</tt>: one row with one column of type <tt>T</tt> as query result.</li>
</ul>
<p>In same way, implicit conversions are provided for <tt>UpdateResult</tt> allowing update handler to defined as following.</p>

<ul>
  
<li><tt>UpdateExecution =&gt; Int</tt>: update count as update result.</li>
</ul>

<div>
<pre>import acolyte.{ QueryResult, RowLists, UpdateResult }
import acolyte.Implicits._

// Alternative definitions for query handler
val qh1: QueryExecution =&gt; QueryResult = 
  // Defined from QueryExecution =&gt; RowList
  { ex: QueryExecution =&gt;
    RowLists.rowList2(classOf[String], classOf[Int]) :+ (&quot;str&quot;, 2)
  }

val qh2: QueryExecution =&gt; QueryResult = // Defined from QueryExecution =&gt; T
  { ex: QueryExecution =&gt; 
    val ur: UpdateResult = &quot;str&quot; // as RowList1[String] with only one row
    ur
  }

// Alternative definition for update handler
val uh1: UpdateExecution =&gt; UpdateResult =
  // Defined from UpdateExecution =&gt; Int
  { ex: UpdateExecution =&gt; /* update count = */ 2 }
</pre></div></div>
<div class="section">
<h4>Result creation<a name="Result_creation"></a></h4>
<p>Row lists can be built in the following way:</p>

<div>
<pre>import acolyte.{ RowList1, RowList3 }
import acolyte.RowLists.{ rowList1, rowList3 }

// ...

val list1 = RowLists.rowList1(String.class)
val list2 = RowLists.rowList3(classOf[Int], classOf[Float], classOf[Char])
</pre></div>
<p>Column names/labels can also be setup (column first index is 1):</p>

<div>
<pre>// ...

val list1up = list1.withLabel(1 -&gt; &quot;first label&quot;)
val list2up = list2.withLabel(2 -&gt; &quot;first label&quot;).withLabel(3 -&gt; &quot;third name&quot;)
</pre></div>
<p>Both column classes and names can be declared in bulk way:</p>

<div>
<pre>import acolyte.{ RowLists, RowList1, RowList3 }

// ...

val list1 = RowLists.rowList1(
  classOf[String] -&gt; &quot;first label&quot;)

val list2 = RowLists.rowList3(
  classOf[Int] -&gt; &quot;1st&quot;,
  classOf[Float] -&gt; &quot;2nd&quot;,
  classOf[Char] -&gt; &quot;3rd&quot;)
</pre></div>
<p><a class="externalLink" href="http://cchantep.github.io/acolyte/apidocs/acolyte/RowLists.html">RowLists factory</a> also provide convinience constructor for single column row list:</p>

<div>
<pre>// Instead of RowLists.rowList1(classOf[String]) :+ stringRow) ...
RowLists.stringList() :+ stringRow

// Instead of RowLists.rowList1(Boolean.TYPE) :+ boolRow) ...
RowLists.booleanList() :+ boolRow

// Instead of RowLists.rowList1(Byte.TYPE) :+ byteRow) ...
RowLists.byteList() :+ byteRow

// Instead of RowLists.rowList1(Short.TYPE) :+ shortRow) ...
RowLists.shortList() :+ shortRow

// Instead of RowLists.rowList1(Integer.TYPE) :+ intRow) ...
RowLists.intList() :+ intRow

// Instead of RowLists.rowList1(Long.TYPE) :+ longRow) ...
RowLists.longList() :+ longRow

// Instead of RowLists.rowList1(Float.TYPE) :+ floatRow) ...
RowLists.floatList() :+ floatRow

// Instead of RowLists.rowList1(Double.TYPE) :+ doubleRow) ...
RowLists.doubleList() :+ doubleRow

// Instead of RowLists.rowList1(classOf[BigDecimal]) :+ bdRow) ...
RowLists.bigDecimalList() :+ bdRow

// Instead of RowLists.rowList1(classOf[Date]) :+ dateRow) ...
RowLists.dateList() :+ dateRow

// Instead of RowLists.rowList1(classOf[Time]) :+ timeRow) ...
RowLists.timeList() :+ timeRow

// Instead of RowLists.rowList1(classOf[Timestamp]) :+ tsRow) ...
RowLists.timestampList() :+ tsRow
</pre></div>
<p>Once you have declared your row list, and before turning it as result set, you can either add rows to it, or leave it empty.</p>

<div>
<pre>import java.sql.ResultSet

import acolyte.Rows.row1

// ...

val rs1: ResultSet = list1.append(&quot;str&quot;).resultSet()
val rs2: ResultSet = list2.resultSet()
</pre></div></div></div>
<div class="section">
<h3>Converters<a name="Converters"></a></h3>
<p>Row instance can be maid more Scala-friendly using converter.</p>

<div>
<pre>import acolyte.Rows.row2
import acolyte.JavaConverters.rowAsScala

val row = row2(classOf[String], classOf[Float])
val cells = row.list // implicit convert while getting Scala list of cells
</pre></div></div>
<div class="section">
<h3>Specs2<a name="Specs2"></a></h3>
<p>Acolyte can be used with specs2 to write executable specification for function accessing persistence.</p>
<p>Considering a sample persistence function:</p>

<div>
<pre>object Zoo {
  trait Animal { def name: String }
  case class Bird(name: String, fly: Boolean = true) extends Animal
  case class Dog(name: String, color: String) extends Animal

  def atLocation(con: java.sql.Connection)(id: Int): Option[Animal] = {
    // Yes would be better with something like Anorm or Slick
    var stmt: java.sql.PreparedStatement = null
    var rs: java.sql.ResultSet = null

    try {
      stmt = con.prepareStatement(&quot;SELECT * FROM zoo WHERE location = ?&quot;)
      stmt.setInt(1, id)

      rs = stmt.executeQuery()
      rs.next()

      rs.getString(&quot;type&quot;) match {
        case &quot;bird&quot; &#x21d2; Some(Bird(rs.getString(&quot;name&quot;), rs.getBoolean(&quot;fly&quot;)))
        case &quot;dog&quot;  &#x21d2; Some(Dog(rs.getString(&quot;name&quot;), rs.getString(&quot;color&quot;)))
        case _      &#x21d2; None
      }
    } catch {
      case _: Throwable &#x21d2; sys.error(&quot;Fails to locate animate&quot;)
    } finally {
      try { rs.close() }
      try { stmt.close() }
    }
  }
}
</pre></div>
<p>Then following specification can be written, checking that query result is properly selected and mapped:</p>

<div>
<pre>import acolyte.Implicits._
import acolyte.Acolyte.{ connection, handleQuery } // DSL
import acolyte.RowLists.rowList5
import acolyte.Rows.row5
import Zoo._

object ZooSpec extends org.specs2.mutable.Specification {
  val zooSchema = rowList5(
    classOf[String] -&gt; &quot;type&quot;,
    classOf[Int] -&gt; &quot;location&quot;,
    classOf[String] -&gt; &quot;name&quot;,
    classOf[Boolean] -&gt; &quot;fly&quot;,
    classOf[String] -&gt; &quot;color&quot;)

  &quot;Dog&quot; should {
    &quot;be found at location 1, and be red&quot; in withQueryResult(
      zooSchema :+ (&quot;dog&quot;, 1, &quot;Scooby&quot;, null.asInstanceOf[Boolean], &quot;red&quot;)) {
        conn &#x21d2;
          atLocation(conn)(1) aka &quot;animal&quot; must beSome(Dog(&quot;Scooby&quot;, &quot;red&quot;))
    }
  }

  &quot;Ostrich&quot; should {
    &quot;be found at location 2&quot; in {
      val conn = connection(handleQuery { _ &#x21d2;
        zooSchema :+ (&quot;bird&quot;, 2, &quot;Ostrich&quot;, false, null.asInstanceOf[String])
      })

      atLocation(conn)(2) aka &quot;animal&quot; must beSome(Bird(&quot;Ostrich&quot;, false))
    }
  }
}
</pre></div></div>
<div class="section">
<h3>JUnit<a name="JUnit"></a></h3>
<p>Acolyte can be used with JUnit to write test case for Java method accessing persistence:</p>

<div>
<pre>
<span class="kn">import</span> <span class="nn">java.util.List</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.sql.DriverManager</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.sql.SQLException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.sql.Connection</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">static</span> <span class="n">org</span><span class="o">.</span><span class="na">junit</span><span class="o">.</span><span class="na">Assert</span><span class="o">.</span><span class="o">*</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">acolyte.AbstractCompositeHandler.QueryHandler</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">acolyte.StatementHandler.Parameter</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">acolyte.QueryResult</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">acolyte.RowList5</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">static</span> <span class="n">acolyte</span><span class="o">.</span><span class="na">RowList</span><span class="o">.</span><span class="na">Column</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">acolyte</span><span class="o">.</span><span class="na">RowLists</span><span class="o">.</span><span class="na">rowList5</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">acolyte</span><span class="o">.</span><span class="na">Rows</span><span class="o">.</span><span class="na">row5</span><span class="o">;</span>

<span class="nd">@org.junit.runner.RunWith</span><span class="o">(</span><span class="n">org</span><span class="o">.</span><span class="na">junit</span><span class="o">.</span><span class="na">runners</span><span class="o">.</span><span class="na">JUnit4</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ZooTest</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="n">RowList5</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span><span class="n">Integer</span><span class="o">,</span><span class="n">String</span><span class="o">,</span><span class="n">Boolean</span><span class="o">,</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">zooSchema</span> <span class="o">=</span>
        <span class="n">rowList5</span><span class="o">(</span><span class="n">Column</span><span class="o">(</span><span class="n">String</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="s">&quot;type&quot;</span><span class="o">)</span><span class="o">,</span>
                 <span class="n">Column</span><span class="o">(</span><span class="n">Integer</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="s">&quot;location&quot;</span><span class="o">)</span><span class="o">,</span>
                 <span class="n">Column</span><span class="o">(</span><span class="n">String</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="s">&quot;name&quot;</span><span class="o">)</span><span class="o">,</span>
                 <span class="n">Column</span><span class="o">(</span><span class="n">Boolean</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="s">&quot;fly&quot;</span><span class="o">)</span><span class="o">,</span>
                 <span class="n">Column</span><span class="o">(</span><span class="n">String</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="s">&quot;color&quot;</span><span class="o">)</span><span class="o">)</span><span class="o">;</span>

    <span class="nd">@org.junit.Test</span><span class="nf"></span>
<span class="nf">    public void </span><span class="nf">dogAtLocation</span><span class="o">(</span><span class="o">)</span> <span class="o">{</span>
        <span class="kd">final</span> <span class="n">String</span> <span class="n">handlerId</span> <span class="o">=</span> <span class="s">&quot;dogTest&quot;</span><span class="o">;</span><span class="nf"></span>
<span class="nf">        acolyte.Driver.</span>
<span class="nf">            </span><span class="nf">register</span><span class="o">(</span><span class="n">handlerId</span><span class="o">,</span> <span class="n">acolyte</span><span class="o">.</span><span class="na">CompositeHandler</span><span class="o">.</span><span class="na">empty</span><span class="o">(</span><span class="o">)</span><span class="o">.</span>
                     <span class="n">withQueryDetection</span><span class="o">(</span><span class="s">&quot;^SELECT&quot;</span><span class="o">)</span><span class="o">.</span>
                     <span class="n">withQueryHandler</span><span class="o">(</span><span class="nf">new </span><span class="nf">QueryHandler</span><span class="o">(</span><span class="o">)</span> <span class="o">{</span><span class="nf"></span>
<span class="nf">                             public QueryResult </span><span class="nf">apply</span><span class="o">(</span><span class="n">String</span> <span class="n">sql</span><span class="o">,</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">Parameter</span><span class="o">&gt;</span> <span class="n">parameters</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">SQLException</span> <span class="o">{</span><span class="nf"></span>
<span class="nf">                                 return zooSchema.</span>
<span class="nf">                                     </span><span class="nf">append</span><span class="o">(</span><span class="s">&quot;dog&quot;</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="s">&quot;Scooby&quot;</span><span class="o">,</span> <span class="kc">null</span><span class="o">,</span> <span class="s">&quot;red&quot;</span><span class="o">)</span><span class="o">.</span>
                                     <span class="n">asResult</span><span class="o">(</span><span class="o">)</span><span class="o">;</span>

                             <span class="o">}</span>
                         <span class="o">}</span><span class="o">)</span><span class="o">)</span><span class="o">;</span>

        <span class="kd">final</span> <span class="n">String</span> <span class="n">jdbcUrl</span> <span class="o">=</span> 
            <span class="s">&quot;jdbc:acolyte:anything-you-want?handler=&quot;</span> <span class="o">+</span> <span class="n">handlerId</span><span class="o">;</span>

        <span class="k">try</span> <span class="o">{</span>
            <span class="kd">final</span> <span class="n">Zoo</span> <span class="n">zoo</span> <span class="o">=</span><span class="nf"> new </span><span class="nf">Zoo</span><span class="o">(</span><span class="n">DriverManager</span><span class="o">.</span><span class="na">getConnection</span><span class="o">(</span><span class="n">jdbcUrl</span><span class="o">)</span><span class="o">)</span><span class="o">;</span>
            
            <span class="n">org</span><span class="o">.</span><span class="na">junit</span><span class="o">.</span><span class="na">Assert</span><span class="o">.</span><span class="na">assertEquals</span><span class="o">(</span><span class="s">&quot;Dog should be found at location 1&quot;</span><span class="o">,</span> 
                                          <span class="n">zoo</span><span class="o">.</span><span class="na">atLocation</span><span class="o">(</span><span class="mi">1</span><span class="o">)</span><span class="o">,</span><span class="nf"> </span>
<span class="nf">                                          new </span><span class="nf">Dog</span><span class="o">(</span><span class="s">&quot;Scooby&quot;</span><span class="o">,</span> <span class="s">&quot;red&quot;</span><span class="o">)</span><span class="o">)</span><span class="o">;</span>

        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">org</span><span class="o">.</span><span class="na">junit</span><span class="o">.</span><span class="na">Assert</span><span class="o">.</span><span class="na">fail</span><span class="o">(</span><span class="n">e</span><span class="o">.</span><span class="na">getMessage</span><span class="o">(</span><span class="o">)</span><span class="o">)</span><span class="o">;</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="nd">@org.junit.Test</span><span class="nf"></span>
<span class="nf">    public void </span><span class="nf">birdAtLocation</span><span class="o">(</span><span class="o">)</span> <span class="o">{</span>
        <span class="kd">final</span> <span class="n">Connection</span> <span class="n">conn</span> <span class="o">=</span><span class="nf"> acolyte.Driver.</span>
<span class="nf">            </span><span class="nf">connection</span><span class="o">(</span><span class="n">acolyte</span><span class="o">.</span><span class="na">CompositeHandler</span><span class="o">.</span><span class="na">empty</span><span class="o">(</span><span class="o">)</span><span class="o">.</span>
                     <span class="n">withQueryDetection</span><span class="o">(</span><span class="s">&quot;^SELECT&quot;</span><span class="o">)</span><span class="o">.</span>
                     <span class="n">withQueryHandler</span><span class="o">(</span><span class="nf">new </span><span class="nf">QueryHandler</span><span class="o">(</span><span class="o">)</span> <span class="o">{</span><span class="nf"></span>
<span class="nf">                             public QueryResult </span><span class="nf">apply</span><span class="o">(</span><span class="n">String</span> <span class="n">sql</span><span class="o">,</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">Parameter</span><span class="o">&gt;</span> <span class="n">parameters</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">SQLException</span> <span class="o">{</span><span class="nf"></span>
<span class="nf">                                 return zooSchema.</span>
<span class="nf">                                     </span><span class="nf">append</span><span class="o">(</span><span class="s">&quot;bird&quot;</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="s">&quot;Ostrich&quot;</span><span class="o">,</span> <span class="kc">false</span><span class="o">,</span> <span class="kc">null</span><span class="o">)</span><span class="o">)</span><span class="o">.</span>
                                     <span class="n">asResult</span><span class="o">(</span><span class="o">)</span><span class="o">;</span>

                             <span class="o">}</span>
                         <span class="o">}</span><span class="o">)</span><span class="o">)</span><span class="o">;</span>

        <span class="n">org</span><span class="o">.</span><span class="na">junit</span><span class="o">.</span><span class="na">Assert</span><span class="o">.</span><span class="na">assertEquals</span><span class="o">(</span><span class="s">&quot;Ostrich should be found at location 2&quot;</span><span class="o">,</span><span class="nf"> </span>
<span class="nf">                                      new </span><span class="nf">Zoo</span><span class="o">(</span><span class="n">conn</span><span class="o">)</span><span class="o">.</span><span class="na">atLocation</span><span class="o">(</span><span class="mi">2</span><span class="o">)</span><span class="o">,</span><span class="nf"> </span>
<span class="nf">                                      new </span><span class="nf">Bird</span><span class="o">(</span><span class="s">&quot;Ostrich&quot;</span><span class="o">,</span> <span class="kc">false</span><span class="o">)</span><span class="o">)</span><span class="o">;</span>

    <span class="o">}</span>
<span class="o">}</span>
</pre></div>
<p>Sample zoo method could be as following:</p>

<div>
<pre>
<span class="kn">import</span> <span class="nn">java.sql.PreparedStatement</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.sql.Connection</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.sql.ResultSet</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Zoo</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="n">Connection</span> <span class="n">connection</span><span class="o">;</span><span class="nf"></span>
<span class="nf"></span>
<span class="nf">    public </span><span class="nf">Zoo</span><span class="o">(</span><span class="n">Connection</span> <span class="n">c</span><span class="o">)</span> <span class="o">{</span> <span class="k">this</span><span class="o">.</span><span class="na">connection</span> <span class="o">=</span> <span class="n">c</span><span class="o">;</span> <span class="o">}</span><span class="nf"></span>
<span class="nf"></span>
<span class="nf">    public Animal </span><span class="nf">atLocation</span><span class="o">(</span><span class="kt">int</span> <span class="n">id</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">PreparedStatement</span> <span class="n">stmt</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
        <span class="n">ResultSet</span> <span class="n">rs</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

        <span class="k">try</span> <span class="o">{</span>
            <span class="n">stmt</span> <span class="o">=</span><span class="nf"> this.connection.</span>
<span class="nf">                </span><span class="nf">prepareStatement</span><span class="o">(</span><span class="s">&quot;SELECT * FROM zoo WHERE location = ?&quot;</span><span class="o">)</span><span class="o">;</span>

            <span class="n">stmt</span><span class="o">.</span><span class="na">setInt</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="n">id</span><span class="o">)</span><span class="o">;</span>

            <span class="n">rs</span> <span class="o">=</span> <span class="n">stmt</span><span class="o">.</span><span class="na">executeQuery</span><span class="o">(</span><span class="o">)</span><span class="o">;</span>
            <span class="n">rs</span><span class="o">.</span><span class="na">next</span><span class="o">(</span><span class="o">)</span><span class="o">;</span>

            <span class="kd">final</span> <span class="n">String</span> <span class="n">type</span> <span class="o">=</span> <span class="n">rs</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="s">&quot;type&quot;</span><span class="o">)</span><span class="o">;</span>
            
            <span class="k">if</span> <span class="o">(</span><span class="n">type</span> <span class="o">=</span><span class="o">=</span> <span class="s">&quot;bird&quot;</span><span class="o">)</span> <span class="o">{</span><span class="nf"></span>
<span class="nf">                return new </span><span class="nf">Bird</span><span class="o">(</span><span class="n">rs</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="s">&quot;name&quot;</span><span class="o">)</span><span class="o">,</span> <span class="n">rs</span><span class="o">.</span><span class="na">getBoolean</span><span class="o">(</span><span class="s">&quot;fly&quot;</span><span class="o">)</span><span class="o">)</span><span class="o">;</span>
            <span class="o">}</span><span class="nf"> else </span><span class="nf">if</span> <span class="o">(</span><span class="n">type</span> <span class="o">=</span><span class="o">=</span> <span class="s">&quot;dog&quot;</span><span class="o">)</span> <span class="o">{</span><span class="nf"></span>
<span class="nf">                return new </span><span class="nf">Dog</span><span class="o">(</span><span class="n">rs</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="s">&quot;name&quot;</span><span class="o">)</span><span class="o">,</span> <span class="n">rs</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="s">&quot;color&quot;</span><span class="o">)</span><span class="o">)</span><span class="o">;</span>
            <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
                <span class="k">return</span> <span class="kc">null</span><span class="o">;</span>
            <span class="o">}</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">(</span><span class="o">)</span><span class="o">;</span><span class="nf"></span>
<span class="nf">            throw new </span><span class="nf">RuntimeException</span><span class="o">(</span><span class="s">&quot;Fails to locate animate&quot;</span><span class="o">)</span><span class="o">;</span>
        <span class="o">}</span> <span class="k">finally</span> <span class="o">{</span>
            <span class="k">try</span> <span class="o">{</span> <span class="n">rs</span><span class="o">.</span><span class="na">close</span><span class="o">(</span><span class="o">)</span><span class="o">;</span> <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span><span class="o">}</span>
            <span class="k">try</span> <span class="o">{</span> <span class="n">stmt</span><span class="o">.</span><span class="na">close</span><span class="o">(</span><span class="o">)</span><span class="o">;</span> <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span><span class="o">}</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="kd">interface</span> <span class="nc">Animal</span> <span class="o">{</span><span class="nf"></span>
<span class="nf">    public String </span><span class="nf">getName</span><span class="o">(</span><span class="o">)</span><span class="o">;</span>
<span class="o">}</span>
<span class="kd">class</span> <span class="nc">Bird</span> <span class="kd">implements</span> <span class="n">Animal</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">name</span><span class="o">;</span>
    <span class="kd">public</span> <span class="kd">final</span> <span class="kt">boolean</span> <span class="n">fly</span><span class="o">;</span><span class="nf"></span>
<span class="nf"></span>
<span class="nf">    public </span><span class="nf">Bird</span><span class="o">(</span><span class="n">String</span> <span class="n">n</span><span class="o">,</span> <span class="kt">boolean</span> <span class="n">f</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="n">n</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">fly</span> <span class="o">=</span> <span class="n">f</span><span class="o">;</span>
    <span class="o">}</span><span class="nf"></span>
<span class="nf"></span>
<span class="nf">    public String </span><span class="nf">getName</span><span class="o">(</span><span class="o">)</span> <span class="o">{</span> <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">name</span><span class="o">;</span> <span class="o">}</span><span class="nf"></span>
<span class="nf"></span>
<span class="nf">    public boolean </span><span class="nf">equals</span><span class="o">(</span><span class="n">Object</span> <span class="n">o</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">o</span> <span class="o">=</span><span class="o">=</span> <span class="kc">null</span> <span class="o">|</span><span class="o">|</span> <span class="o">!</span><span class="o">(</span><span class="n">o</span> <span class="k">instanceof</span> <span class="n">Bird</span><span class="o">)</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
        <span class="o">}</span> 

        <span class="kd">final</span> <span class="n">Bird</span> <span class="n">other</span> <span class="o">=</span> <span class="o">(</span><span class="n">Bird</span><span class="o">)</span> <span class="n">o</span><span class="o">;</span>

        <span class="k">return</span> <span class="o">(</span><span class="o">(</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span><span class="o">=</span> <span class="kc">null</span> <span class="o">&amp;</span><span class="o">&amp;</span> <span class="n">other</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span><span class="o">=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">|</span><span class="o">|</span>
                 <span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">name</span> <span class="o">!</span><span class="o">=</span> <span class="kc">null</span> <span class="o">&amp;</span><span class="o">&amp;</span> <span class="k">this</span><span class="o">.</span><span class="na">name</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">other</span><span class="o">.</span><span class="na">name</span><span class="o">)</span><span class="o">)</span><span class="o">)</span> <span class="o">&amp;</span><span class="o">&amp;</span>
                <span class="k">this</span><span class="o">.</span><span class="na">fly</span> <span class="o">=</span><span class="o">=</span> <span class="n">other</span><span class="o">.</span><span class="na">fly</span><span class="o">)</span><span class="o">;</span>

    <span class="o">}</span>
<span class="o">}</span>
<span class="kd">class</span> <span class="nc">Dog</span> <span class="kd">implements</span> <span class="n">Animal</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">name</span><span class="o">;</span>
    <span class="kd">public</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">color</span><span class="o">;</span><span class="nf"></span>
<span class="nf"></span>
<span class="nf">    public </span><span class="nf">Dog</span><span class="o">(</span><span class="n">String</span> <span class="n">n</span><span class="o">,</span> <span class="n">String</span> <span class="n">c</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="n">n</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">color</span> <span class="o">=</span> <span class="n">c</span><span class="o">;</span>
    <span class="o">}</span><span class="nf"></span>
<span class="nf"></span>
<span class="nf">    public String </span><span class="nf">getName</span><span class="o">(</span><span class="o">)</span> <span class="o">{</span> <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">name</span><span class="o">;</span> <span class="o">}</span><span class="nf"></span>
<span class="nf"></span>
<span class="nf">    public boolean </span><span class="nf">equals</span><span class="o">(</span><span class="n">Object</span> <span class="n">o</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">o</span> <span class="o">=</span><span class="o">=</span> <span class="kc">null</span> <span class="o">|</span><span class="o">|</span> <span class="o">!</span><span class="o">(</span><span class="n">o</span> <span class="k">instanceof</span> <span class="n">Dog</span><span class="o">)</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
        <span class="o">}</span> 

        <span class="kd">final</span> <span class="n">Dog</span> <span class="n">other</span> <span class="o">=</span> <span class="o">(</span><span class="n">Dog</span><span class="o">)</span> <span class="n">o</span><span class="o">;</span>

        <span class="k">return</span> <span class="o">(</span><span class="o">(</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span><span class="o">=</span> <span class="kc">null</span> <span class="o">&amp;</span><span class="o">&amp;</span> <span class="n">other</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span><span class="o">=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">|</span><span class="o">|</span>
                 <span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">name</span> <span class="o">!</span><span class="o">=</span> <span class="kc">null</span> <span class="o">&amp;</span><span class="o">&amp;</span> <span class="k">this</span><span class="o">.</span><span class="na">name</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">other</span><span class="o">.</span><span class="na">name</span><span class="o">)</span><span class="o">)</span><span class="o">)</span> <span class="o">&amp;</span><span class="o">&amp;</span>
                <span class="o">(</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">color</span> <span class="o">=</span><span class="o">=</span> <span class="kc">null</span> <span class="o">&amp;</span><span class="o">&amp;</span> <span class="n">other</span><span class="o">.</span><span class="na">color</span> <span class="o">=</span><span class="o">=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">|</span><span class="o">|</span>
                 <span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">color</span> <span class="o">!</span><span class="o">=</span> <span class="kc">null</span> <span class="o">&amp;</span><span class="o">&amp;</span> <span class="k">this</span><span class="o">.</span><span class="na">color</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">other</span><span class="o">.</span><span class="na">color</span><span class="o">)</span><span class="o">)</span><span class="o">)</span><span class="o">)</span><span class="o">;</span>

    <span class="o">}</span>
<span class="o">}</span>
</pre></div></div>
<div class="section">
<h3>Limitations<a name="Limitations"></a></h3>

<ul>
  
<li>Limited datatype conversions.</li>
  
<li>Binary datatype are not currently supported.</li>
  
<li>Pseudo-support for transaction.</li>
  
<li>Currency types.</li>
</ul></div>
<div class="section">
<h3>Related applications<a name="Related_applications"></a></h3>

<ul>
  
<li><a href="./studio.html">Acolyte Studio</a>: Application with CLI and GUI which is useful when you already have a database and want tests to use data extracted from there.</li>
</ul></div></div>
<div class="section">
<h2>Build<a name="Build"></a></h2>
<p>Acolyte can be built from these sources using SBT (0.12.2+): <tt>sbt publish</tt></p></div>
<div class="section">
<h2>Documentation<a name="Documentation"></a></h2>
<p>Documentation is generated using Maven 3: <tt>mvn -f site.xml site</tt></p></div>
<div class="section">
<h2>Deploy<a name="Deploy"></a></h2>
<p>To local repository:</p>

<div>
<pre>mvn gpg:sign-and-deploy-file -Dkeyname=$KEY -DpomFile=jdbc-driver/target/jdbc-driver-$VERSION.pom -Dfile=jdbc-driver/target/jdbc-driver-$VERSION.jar -Durl=file://$REPOPATH

mvn gpg:sign-and-deploy-file -Dkeyname=$KEY -DpomFile=jdbc-scala/target/scala-2.10/jdbc-scala_2.10-$VERSION.pom -Dfile=jdbc-scala/target/scala-2.10/jdbc-scala_2.10-$VERSION.jar -Durl=file://$REPOPATH

mvn gpg:sign-and-deploy-file -Dkeyname=$KEY -DpomFile=scalac-plugin/target/scala-2.10/scalac-plugin_2.10-$VERSION.pom -Dfile=scalac-plugin/target/scala-2.10/scalac-plugin_2.10-$VERSION.jar -Durl=file://$REPOPATH
</pre></div>
<p>At Sonatype:</p>

<div>
<pre>export REPO=&quot;https://oss.sonatype.org/service/local/staging/deploy/maven2/&quot;
# or https://oss.sonatype.org/content/repositories/snapshots/

mvn gpg:sign-and-deploy-file -Dkeyname=$KEY -DpomFile=jdbc-driver/target/jdbc-driver-$VERSION.pom -Dfile=jdbc-driver/target/jdbc-driver-$VERSION.jar -Durl=$REPO -DrepositoryId=sonatype-nexus-staging

mvn gpg:sign-and-deploy-file -Dkeyname=$KEY -DpomFile=jdbc-driver/target/jdbc-driver-$VERSION.pom -Dfile=jdbc-driver/target/jdbc-driver-$VERSION-javadoc.jar -Dclassifier=javadoc -Durl=$REPO -DrepositoryId=sonatype-nexus-staging

mvn gpg:sign-and-deploy-file -Dkeyname=$KEY -DpomFile=jdbc-driver/target/jdbc-driver-$VERSION.pom -Dfile=jdbc-driver/target/jdbc-driver-$VERSION-sources.jar -Dclassifier=sources -Durl=$REPO -DrepositoryId=sonatype-nexus-staging

export SCALAVER=&quot;2.10&quot;

mvn gpg:sign-and-deploy-file -Dkeyname=$KEY -DpomFile=jdbc-scala/target/scala-$SCALAVER/jdbc-scala_$SCALAVER-$VERSION.pom -Dfile=jdbc-scala/target/scala-$SCALAVER/jdbc-scala_$SCALAVER-$VERSION.jar -Durl=$REPO -DrepositoryId=sonatype-nexus-staging

mvn gpg:sign-and-deploy-file -Dkeyname=$KEY -DpomFile=jdbc-scala/target/scala-$SCALAVER/jdbc-scala_$SCALAVER-$VERSION.pom -Dfile=jdbc-scala/target/scala-$SCALAVER/jdbc-scala_$SCALAVER-$VERSION-javadoc.jar -Dclassifier=javadoc -Durl=$REPO -DrepositoryId=sonatype-nexus-staging

mvn gpg:sign-and-deploy-file -Dkeyname=$KEY -DpomFile=jdbc-scala/target/scala-$SCALAVER/jdbc-scala_$SCALAVER-$VERSION.pom -Dfile=jdbc-scala/target/scala-$SCALAVER/jdbc-scala_$SCALAVER-$VERSION-sources.jar -Dclassifier=sources -Durl=$REPO -DrepositoryId=sonatype-nexus-staging

mvn gpg:sign-and-deploy-file -Dkeyname=$KEY -DpomFile=scalac-plugin/target/scala-$SCALAVER/scalac-plugin_$SCALAVER-$VERSION.pom -Dfile=scalac-plugin/target/scala-$SCALAVER/scalac-plugin_$SCALAVER-$VERSION.jar -Durl=$REPO -DrepositoryId=sonatype-nexus-staging

mvn gpg:sign-and-deploy-file -Dkeyname=$KEY -DpomFile=scalac-plugin/target/scala-$SCALAVER/scalac-plugin_$SCALAVER-$VERSION.pom -Dfile=scalac-plugin/target/scala-$SCALAVER/scalac-plugin_$SCALAVER-$VERSION-javadoc.jar -Dclassifier=javadoc -Durl=$REPO -DrepositoryId=sonatype-nexus-staging

mvn gpg:sign-and-deploy-file -Dkeyname=$KEY -DpomFile=scalac-plugin/target/scala-$SCALAVER/scalac-plugin_$SCALAVER-$VERSION.pom -Dfile=scalac-plugin/target/scala-$SCALAVER/scalac-plugin_$SCALAVER-$VERSION-sources.jar -Dclassifier=sources -Durl=$REPO -DrepositoryId=sonatype-nexus-staging
</pre></div>
<p>Authentication should be configured in <tt>~/.m2/settings.xml</tt>:</p>

<div>
<pre>
<span class="nt">&lt;settings</span><span class="nt">&gt;</span>
  <span class="nt">&lt;servers</span><span class="nt">&gt;</span>
    <span class="c">&lt;!--</span><span class="c"> ... </span><span class="c">--&gt;</span>

    <span class="nt">&lt;server</span><span class="nt">&gt;</span>
      <span class="nt">&lt;id</span><span class="nt">&gt;</span>sonatype-nexus-staging<span class="nt">&lt;/id&gt;</span>
      <span class="nt">&lt;username</span><span class="nt">&gt;</span>your-jira-id<span class="nt">&lt;/username&gt;</span>
      <span class="nt">&lt;password</span><span class="nt">&gt;</span>your-jira-pwd<span class="nt">&lt;/password&gt;</span>
    <span class="nt">&lt;/server&gt;</span>
  <span class="nt">&lt;/servers&gt;</span>
  <span class="c">&lt;!--</span><span class="c"> ... </span><span class="c">--&gt;</span>
<span class="nt">&lt;/settings&gt;</span>
</pre></div></div>
                  </div>
            </div>
          </div>

    <hr/>

    <footer>
            <div class="container-fluid">
                      <div class="row-fluid">
                              <p >Copyright &copy;                   2014.
          All rights reserved.      
                    
      </p>
        </div>

        
        
                </div>
    </footer>
        </body>
</html>
